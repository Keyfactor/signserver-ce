<project name="cli"  basedir="." xmlns:signserver="signserver">

    <!-- Set this to false if no prompting for requested CA, 
         and Web configuration should be made
    -->
    <property name="signserver.prompt" value="true"/>

    <property name="signserver.home" location=".."/>
    <property environment="env"/>

    <property file="${user.home}/${app.name}.properties"/>
    <property file="../${app.name}.properties"/>
    
	<!-- A little special something to handle backward compatibility with 
	       people using JBOSS_HOME. They can switch to APPSRV_HOME now, and both will work. 
	  -->        
	  <condition property="jboss.home" value="${env.JBOSS_HOME}" >
	      <equals arg1="${appserver.home}" arg2="${appserver.home}"/>
	  </condition>
	  <condition property="appserver.home" value="${env.APPSRV_HOME}" else="${jboss.home}">
	      <contains string="${jboss.home}" substring="JBOSS_HOME"/>
	  </condition>


    <property name="lib.dir" location="../lib"/>

    <path id="classpath">
         <!-- need to pickup jndi.properties and log4j.properties -->
        <pathelement path="../bin"/>
        <pathelement path="../tmp/bin/classes"/>
        <fileset dir="${lib.dir}" includes="*.jar"/>
        <fileset dir="${appserver.home}">
        	<!-- jboss -->
            <include name="client/*.jar"/>
        	<!-- glassfish -->
            <include name="lib/*.jar"/>
        	<!-- weblogic -->
            <include name="server/lib/weblogic.jar"/>
        	<!-- oracle -->
            <include name="j2ee/home/oc4jclient.jar"/>
        	<!-- websphere -->
            <include name="runtimes/com.ibm.*.jar"/>
        </fileset>
    </path>



    
    <!--
    ==============================================================================
        macro definitions
    ==============================================================================
    -->
    <macrodef name="cli" uri="signserver">
        <attribute name="name"/>
        <attribute name="arg"/>
        <sequential>
        <echo message="@{name} @{arg}"/>
        <java classname="se.primeKey.signserver.cli.@{name}" classpathref="classpath">
            <arg line="@{arg}"/>
        </java>
        </sequential>
    </macrodef>

    <macrodef name="keytool" uri="signserver">
        <attribute name="arg"/>
        <sequential>
        <exec executable="keytool">
            <arg line="@{arg}"/>
        </exec>
        </sequential>
    </macrodef>

</project>