<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="370999392">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-04-17T13:22:15.561+0000">
    <meta name="exp-page-id" content="370999392">
    <meta name="exp-page-title" content="Database Setup">
    <meta name="exp-page-version" content="2">
    <meta name="exp-page-scroll-page-id" content="0ddd58e02b3b289b9a0fd3622cec675d">
    <meta name="exp-page-created" content="2024-01-23T10:08:02.000+0000">
    <meta name="exp-page-last-modified" content="2024-04-17T09:20:00.682+0000">
    <meta name="exp-page-labels" content="signserver-software-only">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">


    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>Database Setup</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="DatabaseSetup-top" pageid="370999392" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Manual.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=370999392" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Manual.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Manual</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Installation.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Installation</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="Database_Setup.html" target="_self" aria-current="page">Database Setup</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-4866d4a37ddba7a0220bbbec1502b2ccb49450e870cd22eda10a695be47bbbd9"><span class="js-hide-until-loaded">Database Setup</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <p>This section cover installing and configuring your database. For information on supported software, see <a href="Prerequisites.html" data-linked-resource-id="370999384" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999384" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999384/Prerequisites" data-scroll-link-target-source-id="370999384">Prerequisites</a>.</p><p>If you are installing SignServer without a database, instead see <strong>Configure Deployment</strong> in <a href="Install_SignServer.html" data-linked-resource-id="370999413" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="370999413" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999413/Install+SignServer" data-scroll-link-target-source-id="370999413">Install SignServer</a> for information on configuring the deployment properties.</p><h2 id="DatabaseSetup-InstallDatabase" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Install Database</h2><p>Depending on your setup, refer to information from your OS/Linux distribution or database vendor for instructions on how to install your database.</p><p>For example, to install MariaDB in CentOS, run the following:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">sudo yum install mariadb mariadb-server</code></div>
</div>
</div><h2 id="DatabaseSetup-ConfigureDatabase" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Configure Database</h2><p>This covers the following information on configuring your database:</p><ul><li><span data-linked-resource-id="449085724" data-linked-resource-version="1" data-linked-resource-type="page">Database Setup#Database Account</span></li><li><span data-linked-resource-id="449085724" data-linked-resource-version="1" data-linked-resource-type="page">Database Setup#Table Creation and Indexes</span></li><li><span data-linked-resource-id="449085724" data-linked-resource-version="1" data-linked-resource-type="page">Database Setup#MariaDB binlog Format Configuration</span></li></ul><p>For more information on application server-specific database configuration such as configuring a database driver, see&nbsp;<a href="Application_Server_Setup.html" data-linked-resource-id="370999396" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="370999396" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999396/Application+Server+Setup" data-scroll-link-target-source-id="370999396">Application Server Setup</a>.</p><h3 class="section scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading" id="DatabaseSetup-DatabaseAccountDatabaseaccount" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3">Database Account <span class="confluence-anchor-link" id="DatabaseSetup-Databaseaccount"></span><span class="confluence-anchor-link" id="Database account"></span></h3><p class="section">Create a database and database user for SignServer. For more information, refer to documentation from the respective database vendor.</p><p class="section">For example for MariaDB something like the following could typically be used:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">mysql -u root</code></div>
<div class="line"><code class="plain">CREATE DATABASE signserver;</code></div>
<div class="line"><code class="plain">GRANT ALL PRIVILEGES ON signserver.* TO signserver</code><code class="color1">@localhost</code><code class="plain"> IDENTIFIED BY </code><code class="string">'signserver'</code><code class="plain">;</code></div>
</div>
</div><p>As Microsoft SQL Server syntax differs from, for example, MySQL, the following provides an example:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">CREATE DATABASE signserver;</code></div>
<div class="line"><code class="plain">USE signserver;</code></div>
<div class="line"><code class="plain">CREATE LOGIN signserver WITH PASSWORD = </code><code class="string">'Signserver01234!'</code><code class="plain">;</code></div>
<div class="line"><code class="plain">CREATE USER signserver FOR LOGIN signserver;</code></div>
<div class="line"><code class="plain">EXEC sp_addrolemember </code><code class="string">'db_owner'</code><code class="plain">, </code><code class="string">'signserver'</code><code class="plain">;</code></div>
</div>
</div><h3 class="section scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading" id="DatabaseSetup-TableCreationandIndexesTablecreationandindexes" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3">Table Creation and Indexes <span class="confluence-anchor-link" id="DatabaseSetup-Tablecreationandindexes"></span><span class="confluence-anchor-link" id="Table creation and indexes"></span></h3><p class="section">The application server will attempt to create tables during startup of SignServer and if the database user does not have table create permissions, the tables must be created manually. For information on database schemas for different databases, refer to <code>doc/sql-scripts/create-tables-signserver-*.sql</code>.</p><p class="section">In order to improve performance, the appropriate database indixes should also be applied. This is extra important for the AuditRecordData table, which otherwise will make SignServer slower to start. Refer to <code>doc/sql-scripts/create-index-signserver.sql</code>.</p><h3 class="section scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading" id="DatabaseSetup-MariaDBbinlogFormatConfigurationMariaDBbinlogformatconfiguration" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3">MariaDB binlog Format Configuration <span class="confluence-anchor-link" id="DatabaseSetup-MariaDBbinlogformatconfiguration"></span><span class="confluence-anchor-link" id="MariaDB binlog format configuration"></span></h3><p>For MariaDB, set <code>binlog_format</code> to "row", for instance in <code>/etc/mysql/my.cnf</code>, <code>/etc/my.cnf</code>, <code>/etc/my.cnf.d/mariadb-server.cnf</code> or similar:</p><div class="scroll-code scroll-highlighted-code-block" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">binlog_format=row</code></div>
</div>
</div>
<nav id="ht-post-nav">
        <a href="Install_Java.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Install Java</span>
        </a>

        <a href="Application_Server_Setup.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Application Server Setup</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>