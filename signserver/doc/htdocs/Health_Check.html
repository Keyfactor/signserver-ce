<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="371000342">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-11-07T13:05:31.537+0000">
    <meta name="exp-page-id" content="371000342">
    <meta name="exp-page-title" content="Health Check">
    <meta name="exp-page-version" content="1">
    <meta name="exp-page-scroll-page-id" content="21491b444e1f541b3e2de4a12f9a81ba">
    <meta name="exp-page-created" content="2018-01-19T16:37:56.000+0000">
    <meta name="exp-page-last-modified" content="2018-01-19T16:55:48.000+0000">
    <meta name="exp-page-labels" content="format">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">

    <!-- Additional Meta Tags -->
    <meta name="exp-document-id" content="371111034">
    <meta name="exp-document-title" content="SignServer Documentation">
    <meta name="exp-version-status" content="in-progress">
    <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
    <meta name="exp-version-name" content="Working version">
    <meta name="exp-version-description" content="">
    <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
    <meta name="exp-variant-id" content="">
    <meta name="exp-variant-name" content="">
    <meta name="exp-variant-description" content="">
    <meta name="exp-language-code" content="">
    <meta name="exp-language-name" content="">

    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>Health Check</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="HealthCheck-top" pageid="371000342" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Documentation.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=371000342" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Documentation.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Documentation</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Reference.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Reference</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="Health_Check.html" target="_self" aria-current="page">Health Check</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-5d4e959ec5b3e26fa1d0cacaefdd9e5ad2b8a26e147d19e3ffd87f23d25eb183"><span class="js-hide-until-loaded">Health Check</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <p>The SignServer Health Check service can be used for health monitoring and is useful for clusters, as it can be checked by load balancers to determine if a node should be active in the cluster (healthy), or taken out of the cluster (unhealthy).</p><p>The servlet is located at the URL: <a class="external-link scroll-external-link" href="http://localhost:8080/signserver/healthcheck/signserverhealth" rel="nofollow" shape="rect" data-scroll-link-type="default" data-scroll-link-target="http://localhost:8080/signserver/healthcheck/signserverhealth" data-scroll-link-local="false">http://localhost:8080/signserver/healthcheck/signserverhealth</a> and configured in <code><span style="color: rgb(0,51,102);">signserver_deploy.properties</span></code>.</p><h2 id="HealthCheck-ConfigurationParameters" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Configuration Parameters</h2><p>The following configuration parameters can be set to configure authorization and what the service checks:</p><div class="table-wrap"><table class="confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.authorizedips</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>A semicolon-delimited list of IP addresses authorized to access the healthcheck servlet. If the list contains the keyword "ANY", any IP address is authorized access. Defaults to 127.0.0.1.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.minimumfreememory</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Number of megabytes of memory that must be free before removing the node out of the cluster. Defaults to 1.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.checkdbstring</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>String used to do a minimal check that the database is working. May differ between databases. Defaults to <code>Select count(*)</code> from signerconfigdata, the property is not used when running without database.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.maintenancefile</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The path to a file containing the maintenance state. This file is a standard Java property file and should have a property (by default named DOWN_FOR_MAINTENANCE"). If this property has the value true, none of the standard health checks will be performed, and instead the result will be a string of the form MAINT: DOWN_FOR_MAINTENANCE. If this property is not set (or an invalid file is given), the maintenance functionality is disabled.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.maintenancepropertyname</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The property name to be used in the maintenance file. This will also affect the error message returned when in maintenance mode (the part of the string after MAINT: defaults to DOWN_FOR_MAINTENANCE).</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.customerrormessage</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If this is set to a non-empty value, the value is used for the error message instead of the details describing the errors (thus not exposing internal details).</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>healthcheck.sendservererror</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If set to true (default), HTTP status 500 is returned with an error page containing the error message if health-monitoring fails. If set to false, a plain text result with HTTP status 200 is returned instead.</p></td></tr></tbody></table></div><h2 id="HealthCheck-Availabletestsandresponses" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">&nbsp;Available tests and responses</h2><p><br clear="none"></p><div class="section"><ul><li><p><strong>No errors: </strong>If all tests passed the HTTP result code is "200 OK" and page contains only the text "ALLOK".</p></li></ul><ul><li><p><strong>Down for maintenance: </strong>If the down for maintenance file indicates that the server is down for maintenance an HTTP response code in 5xx range is returned with an error page containing "MAINT: " followed of the name of the maintenance property as configured. No further checks are performed.</p></li></ul><ul><li><p><strong>Database test: </strong>A test is performed that SignServer is able to query the database. When running without database a check is made that the configured directory is initialized correctly and is not empty. If anything failed one or more error messages are included in an error page returned with the HTTP response code in the 5xx range.</p></li></ul><ul><li><p><strong>Memory test: </strong>Checks the available free memory. If anything failed, an error message is included in an error page returned with the HTTP response code in the 5xx range.</p></li></ul><ul><li><p><strong>Workers test: </strong>Each (non-disabled) worker is checked for a number of things. If anything failed, one or more error messages are included in an error page returned with the HTTP response code in the 5xx range.</p><ul><li><strong>Token offline:</strong>&nbsp;Workers having a crypto token can be reported as offline</li><li><strong>Worker status and errors:&nbsp;</strong>Each worker implementation can put different requirements on when it is status is considered to be offline.</li><li><strong>Signer certificate:</strong>&nbsp;Signers requiring a certificate are checked that they have a certificate matching the configured key-pair and that the certificate is valid according to the certificate validity time and the configured minimum remaining validity time.</li><li><strong>TimeStampSigner certificate missing EKU:</strong>&nbsp;If a TimeStampSigner certificate does not include the required EKU its status is set to offline.</li><li><strong>TimeStampSigner certificate not included in certificate chain</strong>&nbsp;If a TimeStampSigner certificate chain property does not include the signer certificate its status is set to offline.</li></ul></li></ul><ul><li><strong>Disabled workers: </strong>Workers that are disabled by having the worker property DISABLED=true are not considered in the Health Check report.</li></ul><p>&nbsp;</p></div>
<nav id="ht-post-nav">
        <a href="Status_Repository.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Status Repository</span>
        </a>

        <a href="SignServer_TimeMonitor_Application.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>SignServer TimeMonitor Application</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>