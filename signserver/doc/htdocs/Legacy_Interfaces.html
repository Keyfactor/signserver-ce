<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="370999669">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-04-17T13:22:35.616+0000">
    <meta name="exp-page-id" content="370999669">
    <meta name="exp-page-title" content="Legacy Interfaces">
    <meta name="exp-page-version" content="1">
    <meta name="exp-page-scroll-page-id" content="45f7fb90891d6359bb6fa84faf0b3e2a">
    <meta name="exp-page-created" content="2017-12-06T10:16:36.000+0000">
    <meta name="exp-page-last-modified" content="2017-12-06T10:19:12.000+0000">
    <meta name="exp-page-labels" content="">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">


    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>Legacy Interfaces</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="LegacyInterfaces-top" pageid="370999669" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Manual.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=370999669" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Manual.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Manual</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Integration.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Integration</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="Legacy_Interfaces.html" target="_self" aria-current="page">Legacy Interfaces</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-ec63ad455c8824ef5196341de1e63a56b7a1f382d7c95c64aaca721898bdff53"><span class="js-hide-until-loaded">Legacy Interfaces</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <h2 id="LegacyInterfaces-TheoldWebServicesinterface" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">The old Web Services interface</h2><p>The SignServerWS is the old web services interface now replaced by <span class="confluence-link">SignServer </span><a href="Client_WS_Interface.html" data-linked-resource-id="370999568" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999568" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999568/Client+WS+Interface" data-scroll-link-target-source-id="370999568"><span class="confluence-link">ClientWS</span></a>. It was new to version 3.0 and at the time replaced the RMI-SSL interface from version 1.0 and 2.0 for two reasons, the RMI-SSL were based on a commercial library and it only worked for Java clients.</p><p>The SignServerWS WSDL file is located at the URL http://&lt;hostname&gt;:8080/signserver/signserverws/signserverws?wsdl</p><p>The interface has two calls, the main one is 'process' which takes a collection of process request to a processable worker and returns a collection of process responses, the second one is getStatus that performs a health check of the node and returns an OK message if the node is healthy.</p><div class="confluence-information-macro confluence-information-macro-note"><span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>Although the SignServerWS interface uses web services, the actual process data is base64 encoded byte arrays in a special binary format. You will have to lookup the Java source code for the exact format of the request and response data. Alternatively, use the simpler <a href="Client_HTTP_Interface.html" data-linked-resource-id="370999564" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="370999564" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999564/Client+HTTP+Interface" data-scroll-link-target-source-id="370999564">HTTP interface</a>&nbsp;or the newer&nbsp;<a href="Client_WS_Interface.html" data-linked-resource-id="370999568" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="370999568" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999568/Client+WS+Interface" data-scroll-link-target-source-id="370999568">Client WS interface</a>.</p></div></div><p>The getStatus call can be used to implement high-availability towards the client. The Java client API described in the next section have built in support for different high availability policies.</p><p>It is possible to turn off the WebService interface by disabling it in the build configuration.</p><p>This interface is only supported using HTTPS. The reason is that JBoss 4 does not rewrite the protocol part of the WSDL URL so we had to hard code it for it to work with HTTPS. For details about this see&nbsp;<a class="external-link scroll-external-link" href="https://jira.primekey.se/browse/DSS-327" rel="nofollow" shape="rect" data-scroll-link-type="default" data-scroll-link-target="https://jira.primekey.se/browse/DSS-327" data-scroll-link-local="false">DSS-327</a>.</p><p>Since SignServer &gt;=3.2.1 it is possible to supply extra request data called RequestMetadata containing key/value pairs that can be used by the signers. For instance the PDFSigner uses this feature to let the client supply a PDF password.</p><h2 id="LegacyInterfaces-JavaClientAPI" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Java Client API</h2><p>Built along with the WebService is a Java API that can be used by clients. It's available in the file lib/SignServer-Client-SignServerWS.jar (the old SignServerWS interface) and lib/SignServer-Client-ClientWS.jar (the ClientWS interface).</p><h3 id="LegacyInterfaces-SigningAndValidationAPI" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading">SigningAndValidation API</h3><p>The SigningAndValidation API is a wrapper around the previous mentioned API in order to have a simplified interface that also is the same regardless if WebService or EJB Remote calls are used.</p><p>To use the API include the file lib/SignServer-Client-SigningAndValidationAPI.jar.</p><h3 id="LegacyInterfaces-SampleCode" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading">Sample Code</h3><p>Signing and validating an XML document:</p><div class="scroll-code scroll-highlighted-code-block" data-language="java" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="keyword">try</code><code class="plain"> {</code></div>
<div class="line"><code class="plain">    System.setProperty(</code><code class="string">"javax.net.ssl.trustStore"</code><code class="plain">, </code><code class="string">"p12/truststore.jks"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    System.setProperty(</code><code class="string">"javax.net.ssl.trustStorePassword"</code><code class="plain">, </code><code class="string">"changeit"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">  </code></div>
<div class="line"><code class="plain">    ISigningAndValidation signserver = </code><code class="keyword">new</code><code class="plain"> SigningAndValidationWS(</code><code class="string">"localhost"</code><code class="plain">, </code><code class="value">8442</code><code class="plain">, </code><code class="keyword">true</code><code class="plain">);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="comments">// Document to sign</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">byte</code><code class="plain">[] unsigned = </code><code class="string">"&lt;document&gt;&lt;name&gt;Some content&lt;/name&gt;&lt;/document&gt;"</code><code class="plain">.getBytes();</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">byte</code><code class="plain">[] signed;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="comments">// Signing</code></div>
<div class="line"><code class="plain">    GenericSignResponse signResp = signserver.sign(</code><code class="string">"DemoXMLSigner"</code><code class="plain">, unsigned);</code></div>
<div class="line"><code class="plain">    signed = signResp.getProcessedData();</code></div>
<div class="line"><code class="plain">    System.out.println(</code><code class="string">"Signed: "</code><code class="plain"> + </code><code class="keyword">new</code><code class="plain"> String(signed));</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="comments">// Validating</code></div>
<div class="line"><code class="plain">    GenericValidationResponse validateResp = signserver.validate(</code><code class="string">"DemoXMLValidator"</code><code class="plain">, signed);</code></div>
<div class="line"><code class="plain">    System.out.println(</code><code class="string">"Valid: "</code><code class="plain"> + validateResp.isValid());</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain">(validateResp.getSignerCertificate() != </code><code class="keyword">null</code><code class="plain">) {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain">(validateResp.getSignerCertificate() </code><code class="keyword">instanceof</code><code class="plain"> X509Certificate) {</code></div>
<div class="line"><code class="plain">            X509Certificate signerCert = (X509Certificate) validateResp.getSignerCertificate();</code></div>
<div class="line"><code class="plain">            System.out.println(</code><code class="string">"Signed by: "</code><code class="plain"> + signerCert.getSubjectDN().getName());</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">} </code><code class="keyword">catch</code><code class="plain"> (Exception ex) {</code></div>
<div class="line"><code class="plain">    ex.printStackTrace();</code></div>
<div class="line"><code class="plain">}                       </code></div>
</div>
</div>
<nav id="ht-post-nav">
        <a href="Admin_WS_Interface.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Admin WS Interface</span>
        </a>

        <a href="Apache_HTTP_Server_as_Reverse_Proxy.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Apache HTTP Server as Reverse Proxy</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>