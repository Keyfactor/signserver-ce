<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="370999917">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-04-17T13:23:01.859+0000">
    <meta name="exp-page-id" content="370999917">
    <meta name="exp-page-title" content="PDF Signer">
    <meta name="exp-page-version" content="3">
    <meta name="exp-page-scroll-page-id" content="2314addac3c61e2974db946d3411b5ae">
    <meta name="exp-page-created" content="2023-04-26T06:45:40.000+0000">
    <meta name="exp-page-last-modified" content="2024-04-04T08:40:51.561+0000">
    <meta name="exp-page-labels" content="document">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">


    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>PDF Signer</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="PDFSigner-top" pageid="370999917" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Manual.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=370999917" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Manual.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Manual</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Reference.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Reference</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Workers.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Workers</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Signers.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Signers</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="PDF_Signer.html" target="_self" aria-current="page">PDF Signer</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-311dd74515912d35180285e61b802dd02e09956ade25ea8cdd316700cf4c2a53"><span class="js-hide-until-loaded">PDF Signer</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <p><style>[data-colorid=nihk2v57cv]{color:#323232} html[data-color-mode=dark] [data-colorid=nihk2v57cv]{color:#cdcdcd}</style>The PDF signer has the class name: <strong>org.signserver.module.pdfsigner.PDFSigner</strong>.</p><h2 id="PDFSigner-Overview" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Overview</h2><p>The main purpose of the PDF signer is to add digital signatures to PDF documents.</p><p>The signer supports the addition of visible or invisible signatures. Both visible and invisible signatures serve the same purpose of signing a document, and technically are equivalent in that sense. The difference is that when a visible signature is applied to a document, a signature image (in the shape of a rectangle) is placed at the specified place in the document. Clicking the signature image will display the properties of the signature (Adobe Acrobat Reader).</p><p>In contrast, when applying an invisible signature, the signature properties are accessed via menu items. For visible signatures, properties such as custom signature image, signature rectangle, page at which the signature rectangle will be drawn, and so on can be specified (see <a href="PDF_Signer.html#PDFSigner-WorkerProperties" data-scroll-target-source-id="370999917" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999917/PDF+Signer#src-370999917_PDFSigner-WorkerProperties" data-scroll-link-target-source-id="370999917">Worker Properties</a>).</p><p>PDF Signer can also apply a timestamp to a signature. If the signature is timestamped, it can be viewed through signature properties in Adobe Acrobat Reader. Timestamping is used to prove that the document was signed before the time specified by the timestamp token. If the signature is not timestamped then the signature time specified in the signature properties is not considered to be trusted. It is strongly advised to apply a timestamp to a signature, and the TSA module can be used for this purpose.</p><p>Also, the CRL or OCSP Response of the signer's certificate can be embedded inside the signature package. Embedding the CRL or OCSP response with the package will help validate the signature even after the signer's certificate is expired. (Though it will not guarantee long-term signature preservation. The topic of long-term signature preservation for archival purposes is a large one and is discussed to be implemented in future versions of SignServer).</p><p>The PDF Signer can also be configured to enforce that certain PDF permissions are not available in the signed document and/or that certain permissions should be removed.</p><h2 id="PDFSigner-PDFPasswords" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">PDF Passwords</h2><p>PDF documents can optionally be protected by a password. There are two different types of passwords:</p><ul><li>User password: Also sometimes referred to as "open password" or "document password". Can be used for reading an encrypted document.</li><li>Owner password: Also sometimes referred to as "permission password" or "security restriction password". It can be used for reading an encrypted document and making changes to a document that has permissions.</li></ul><p>If a document is protected by an Owner password, it has to be supplied with the request for SignServer to sign the document. If the document is protected by a User password, either the User password or the Owner password has to be supplied with the request for SignServer to sign the document.</p><h2 id="PDFSigner-PDFSignerRequests" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">PDFSigner Requests</h2><p>PDF signing requests can be served using either web services or the web server interface (HTTP). See <a href="SignServer_Integration.html" data-linked-resource-id="370999560" data-linked-resource-version="1" data-linked-resource-type="page" data-scroll-target-source-id="370999560" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999560/SignServer+Integration" data-scroll-link-target-source-id="370999560">SignServer Integration</a> for general information about the different interfaces.</p><p>For the web server interface the GenericProcessServlet can be used. The PDFSigner supports the extra request field "pdfPassword" letting the client supply a PDF password to be used for opening the PDF for signing (not required unless the PDF is already password protected).</p><p>For the old web services interface, the request should contain an encoded GenericProcessesRequest and the response will be a GenericProcessResponse. It is possible to supply a PDF password by including it in the requestMetaData with the key "pdfPassword".</p><h2 id="PDFSigner-WorkerProperties" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Worker Properties</h2><p>The following properties can be configured with the signer:</p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 96.8198%;"><colgroup span="1"><col span="1" style="width: 28.7491%;"></colgroup><colgroup span="1"><col span="1" style="width: 71.2507%;"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Property</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REASON</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The reason included in the PDF signature and displayed by the PDF reader.<br clear="none">Default: "Signed by SignServer".</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>LOCATION</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The location included in the PDF signature and displayed by the PDF reader.<br clear="none">Default: "SignServer".</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ADD_VISIBLE_SIGNATURE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Controls whether the signature to be added should be visible or invisible.<br clear="none">Possible values: True or False.<br clear="none">Default: <strong>False</strong>.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_PAGE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Specifies the page on which the visible signature will be drawn. This property is ignored if ADD_VISIBLE_SIGNATURE is set to <strong>False.</strong> Possible values:</p><ul><li><strong>First</strong>: Signature drawn on the first page of the document.</li><li><strong>Last</strong>: Signature drawn on the last page of the document,</li><li><strong>page_number</strong>: Signature is drawn on a page specified by a numeric argument. If the specified page number exceeds the page count of the document, the signature is drawn on the last page. If the page_number specified is not numeric (or negative number), the signature will be drawn on the first page.</li></ul><p>Default: <strong>First</strong>.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_RECTANGLE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Specifies the rectangle that the signature is going to be drawn in.<br clear="none">This property is ignored if ADD_VISIBLE_SIGNATURE is set to False. Syntax is: (<em>llx</em>,<em>lly</em>,<em>urx</em>,<em>ury</em>).<br clear="none">llx =left lower x coordinate,<br clear="none">lly=left lower y coordinate,<br clear="none">urx =upper right x coordinate,<br clear="none">ury = upper right y coordinate</p><p>Default: "400,700,500,800".</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_CUSTOM_IMAGE_BASE64 &amp; VISIBLE_SIGNATURE_CUSTOM_IMAGE_PATH</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>If you want the visible signature to contain a custom image, specify the image as base64 encoded byte array. Alternatively, the custom image can be specified by giving a path to the image on the file system.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> If specifying a path to an image, "\" should be escaped (thus C:\photo.jpg =&gt; "C:\\photo.jpg").</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> If specifying image as base64 encoded byte array, "=" should be escaped (thus "BBCXMI==" =&gt; "BBCXMI\=\=").</p><p>If both properties are set, VISIBLE_SIGNATURE_CUSTOM_IMAGE_BASE64 will take priority. To disable the feature, do not set the properties.<br clear="none">Default: not set (no custom image).<br clear="none">These properties are ignored if ADD_VISIBLE_SIGNATURE is set to False.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> Note that in a clustered environment, it is advised to specify the image as a base64 string, since image data will be stored in a central database. Otherwise, each node should contain a copy of the image, and each image managed separately (such as on image updates, or insertion of a new image for a different worker).</p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_CUSTOM_IMAGE_RESIZE_TO_RECTANGLE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If you want the custom image to be resized to a specified rectangle (set by VISIBLE_SIGNATURE_RECTANGLE), then set to True. If set to True, the image might look different than the original (as an effect of resizing). If set to False, the rectangle drawn will be resized to the specified image's sizes.<br clear="none">If set to False, the llx and lly coordinates specified by the VISIBLE_SIGNATURE_RECTANGLE property will be used for drawing the rectangle (urx and ury will be calculated from the specified image size).<br clear="none">This property is ignored if ADD_VISIBLE_SIGNATURE is set to False, or if the custom image to use is not specified. Possible values: True, False.<br clear="none">Default: <strong>True</strong>.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>CERTIFICATION_LEVEL</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Set this property to have the document certified with a certifying signature.<br clear="none">Possible values:<br clear="none">NOT_CERTIFIED: The document is not certified.<br clear="none">FORM_FILLING: The document is certified but the form can be filled in without invalidating the signature.<br clear="none">FORM_FILLING_AND_ANNOTATIONS: The document is certified but the form can be filled in and annotations added without invalidating the signature.<br clear="none">NO_CHANGES_ALLOWED: The document is certified and no changes can be made.<br clear="none">Default: "NOT_CERTIFIED".</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>TSA_URL <span class="confluence-anchor-link" id="PDFSigner-TSA_URL"></span><span class="confluence-anchor-link" id="TSA_URL"></span></p></div></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>If you want to timestamp the document signature, specify the timestamp authority URL.<br clear="none">This will cause time stamp requests to be issued via HTTP requests. Under high load, this can lead to thread deadlocks in the application server if using a localhost URL (using a time stamp signer running in the same server). In this case, use the internal mechanism described below). To not timestamp the document signature, do not set the property.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> If path contains characters "\" or "=" , these characters should be escaped (thus "\" = "\\", "=" =&gt;"\=").</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> Cannot be set at the same time as <a href="PDF_Signer.html#PDFSigner-TSA_WORKER" data-scroll-target-source-id="370999917" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999917/PDF+Signer#src-370999917_PDFSigner-TSA_WORKER" data-scroll-link-target-source-id="370999917">TSA_WORKER</a>.</p><p>Default: not set (no timestamping).</p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>TSA_WORKER&nbsp;<span class="confluence-anchor-link" id="PDFSigner-TSA_WORKER"></span><span class="confluence-anchor-link" id="TSA_WORKER"></span></p></div></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>Specify a worker ID or worker name for a time stamp signer<br clear="none">This will use internal calls and can only be used for a time stamp authority running in the same SignServer instance.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> Use instead of TSA_URL when using a time stamp signer running in the same SignServer instance to avoid thread deadlocks under high load.</p><p><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> Cannot be set at the same time as <a href="PDF_Signer.html#PDFSigner-TSA_URL" data-scroll-target-source-id="370999917" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999917/PDF+Signer#src-370999917_PDFSigner-TSA_URL" data-scroll-link-target-source-id="370999917">TSA_URL</a>.</p><p>Default: Not set (no timestamping).</p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>TSA_USERNAME &amp; TSA_PASSWORD&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If the TSA requires authentication for timestamping, specify username and password. If the TSA does not require authentication, do not set these properties. These properties are ignored if TSA_URL is not set (no timestamping).<br clear="none">Default: not set (tsa does not require authentication).</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>EMBED_CRL</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If you want to embed the CRL for the signer certificate inside the signature package, set to <strong>True,</strong> otherwise set to <strong>False.</strong><br clear="none">Default: <strong>False.</strong></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>TSA_DIGESTALGORITHM</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Algorithm for timestamp digests. Optional, default: SHA-256.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>EMBED_OCSP_RESPONSE&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p>To embed the OCSP response for the signer certificate inside the signature package, set to <strong>True,</strong> otherwise set to <strong>False</strong>.</p><p><strong><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"></strong> Issuer certificate (of signing certificate) should be in the certificate chain.<br clear="none"><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)">&nbsp;OCSP responses must contain a nextUpdate field in order for offline validation to work with Adobe Reader. For EJBCA OCSP Responder, see configuration of ocsp.untilNextUpdate in ocsp.properties.</p><p>Default: <strong>False</strong>.</p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ARCHIVETODISK&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If you want the produced signed document to be stored in the local file system, set this property to true and add the ARCHIVETODISK_PATH_BASE property explained below.<br clear="none">Default: <strong>False</strong>.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ARCHIVETODISK_PATH_BASE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The file path to the folder to store the signed documents.<br clear="none">Required if ARCHIVETODISK is <strong>True.</strong></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ARCHIVETODISK_PATH_PATTERN&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Pattern used for creating sub-folders under the ARCHIVETODISK_PATH_BASE folder.<br clear="none">The current date can be specified by adding ${DATE:yyyy} where yyyy can be replaced by the same syntax as defined in the class java.text.SimpleDateFormat. Other fields are:</p><ul><li><strong>${WORKERID}</strong>: ID of the worker processing the request.</li><li><strong>${WORKERNAME}</strong>: Name of the worker processing the request.</li><li><strong>${REMOTEIP}</strong>: IP address of requestor.</li><li><strong>${REQUESTID}</strong>: ID of the request (number).</li><li><strong>${TRANSACTIONID}</strong>: Transaction ID of the request (number and dashes).</li><li><strong>${USERNAME}</strong>: User name if username/password authentication has been used.</li><li><strong>${CUSTOMHEADER1}</strong>: Value of the custom HTTP request header <em>X-SignServer-Custom-1</em>.</li></ul><p>Default: "${DATE:yyyy/MM/dd}".</p><p></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ARCHIVETODISK_FILENAME_PATTERN&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Pattern used for creating the filename. The same fields and syntax as for the ARCHIVETODISK_PATH_PATTERN property can be used.<br clear="none">Default: "${WORKERID}-${REQUESTID}-${DATE:HHmmssSSS}.pdf".</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REFUSE_DOUBLE_INDIRECT_OBJECTS&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>True if PDF documents containing multiple indirect objects with the same name should be refused. Used to mitigate a collision signature vulnerability described in&nbsp;<a class="external-link scroll-external-link" href="http://pdfsig-collision.florz.de/" rel="nofollow" shape="rect" data-scroll-link-type="default" data-scroll-link-target="http://pdfsig-collision.florz.de/" data-scroll-link-local="false">http://pdfsig-collision.florz.de/</a>. Default: <strong>False</strong>.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REJECT_PERMISSIONS&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Reject signing of the document if any of the permissions in the comma-separated list would be in the document.<br clear="none">Available permissions (from the PDF reference, version 1.6, page 99, TABLE 3.20):</p><ul><li>ALLOW_PRINTING <br clear="none">Print the document to a representation from which a faithful digital copy of the PDF content could be generated. When this is not set (and ALLOW_DEGRADED_PRINTING is set), printing is limited to a low-level representation of the appearance, possibly of degraded quality.</li><li>ALLOW_MODIFY_CONTENTS <br clear="none">Modify the contents of the document by operations other than those controlled by ALLOW_MODIFY_ANNOTATIONS, ALLOW_FILL_IN, and ALLOW_SCREENREADERS.</li><li>ALLOW_COPY <br clear="none">Copy or otherwise extract text and graphics from the document, including extracting text and graphics (in support of accessibility to users with disabilities or for other purposes).</li><li>ALLOW_MODIFY_ANNOTATIONS <br clear="none">Add or modify text annotations, fill in interactive form fields, and, if ALLOW_MODIFY_CONTENTS is also set, create or modify interactive form fields (including signature fields).</li><li>ALLOW_FILL_IN <br clear="none">Fill in existing interactive form fields (including signature fields), even if ALLOW_MODIFY_ANNOTATIONS is not set.</li><li>ALLOW_SCREENREADERS <br clear="none">Extract text and graphics (in support of accessibility to users with disabilities or for other purposes).</li><li>ALLOW_ASSEMBLY <br clear="none">Assemble the document (insert, rotate, or delete pages and create bookmarks or thumbnail images), even if ALLOW_MODIFY_CONTENTS is not set.</li><li>ALLOW_DEGRADED_PRINTING <br clear="none">Print the document (possibly not at the highest quality level, depending on whether ALLOW_PRINTING is also set).</li></ul><p>Default: Unset/empty (no permissions are rejected)</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SET_PERMISSIONS&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Replace the current permissions (if any) with the permissions specified in this comma-separated list of permissions. Available permissions: The same permission names as for the property REJECT_PERMISSIONS.<br clear="none"><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> This property cannot be specified if REMOVE_PERMISSIONS is used.<br clear="none"><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> This property and the REMOVE_PERMISSIONS property only set the permissions setting in the document. All permissions might not be enforced by the PDF reader, and some permissions specified to be allowed by this property, might not be allowed when opening the final document (that is, if that would invalidate the signature and/or certification).<br clear="none"><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> If the document is not already protected by an owner password and the SET_OWNERPASSWORD is not specified, a random password will be used as the owner password.<br clear="none">Default: Unset (permissions are not set by this property)</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REMOVE_PERMISSIONS&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Remove all permissions specified in this comma-separated list from the document. Available permissions: The same permission names as for the property REJECT_PERMISSIONS.<br clear="none">This property cannot be specified if SET_PERMISSIONS is used.<br clear="none"><img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> This property only removes the permissions listed even if some permissions (such as ALLOW_PRINTING) by the standard give more permissions (such as also ALLOW_DEGRADED_PRINTING). To remove all permissions to print remove both ALLOW_PRINTING and ALLOW_DEGRADED_PRINTING. To still have ALLOW_DEGRADED_PRINTING it is possible to specify to only remove ALLOW_PRINTING.<br clear="none">See&nbsp;<img class="emoticon emoticon-warning scroll-document-image" data-emoji-id="atlassian-warning" data-emoji-shortname=":warning:" data-emoji-fallback=":warning:" src="_scroll_external/icons/754c3e37f939/warning.png" width="16" height="16" data-emoticon-name="warning" alt="(varning)"> notes for REMOVE_PERMISSIONS which also applies to this setting.<br clear="none">Removing only ALLOW_DEGRADED_PRINTING has no effect, as degraded printing is implicitly allowed if printing is allowed.<br clear="none">Default: Unset/empty (no permissions are removed)</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SET_OWNERPASSWORD&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Sets the specified password as the owner password in the document.<br clear="none">The same permissions as before will be used (unless other properties will change them). The same encryption algorithm as the original document will be used. If the original document did not use any encryption then the default encryption algorithm will be used.<br clear="none">Default: unset (if the permissions are changed, the existing owner password will be used or if no such password is used in the document a semi-random password will be created)</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>DIGESTALGORITHM&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Sets the hash algorithm used for the message digest and signature hash.<br clear="none">Setting this property will also imply a minimum PDF version depending on the hash used. The resulting PDF will be upgraded to this version if it is higher than the version used in the original PDF. Since upgrading the version requires re-creating the file (thus not appending the new signature), it is not supported on an already signed document (that is, using a hash algorithm requiring a higher version than the original document). Attempting to sign such a document will result in a failure.</p><div class="table-wrap"><table class="wrapped confluenceTable"><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Supported hash algorithms</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Algorithm PDF version</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SHA1&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>1.3</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SHA256&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>1.6</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SHA384&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>1.7</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SHA512&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>1.7</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>RIPEMD160&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>1.7</p></td></tr></tbody></table></div><p>Default setting is SHA256.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ALLOW_PROPERTY_OVERRIDE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Comma-separated list of worker properties that are allowed to be overridden by request metadata properties with the same names.</p><p>See <a href="PDF_Signer.html#PDFSigner-RequestMetadataProperties" data-scroll-target-source-id="370999917" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999917/PDF+Signer#src-370999917_PDFSigner-RequestMetadataProperties" data-scroll-link-target-source-id="370999917">Request Metadata Properties</a> for a list of properties that can be added to this property.</p><p>Default: not set (no properties are allowed to be overridden).</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><span data-colorid="nihk2v57cv">ALLOW_SIGNING_WITHOUT_OWNERPASSWORD</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>By default, the PDF Signer requires the owner's password to sign a PDF that has PDF permissions set.</p><p>Setting <strong>ALLOW_SIGNING_WITHOUT_OWNERPASSWORD</strong> to true allows signing a protected PDF without providing the owner's password. The property is by default set to false for backward compatibility.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><span><span class="line" lang="java"><span class="s">APPEND_SIGNATURE</span></span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Set to FALSE if the document has no signature and the PDF Signer should not use the appended signature. The PDF Signer will then instead rewrite the document and use an embedded signature in it. Setting to FALSE resolves a potential issue with PDFs in format versions 1.6-1.7 and ensures that the PDF is rewritten and that the previous signature is not invalidated.</p><p>This setting is by default not set. Setting this property to TRUE or to an invalid value is the same as leaving this property unset.</p></td></tr></tbody></table></div><h2 class="auto-cursor-target scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading" id="PDFSigner-RequestMetadataProperties" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2">Request Metadata Properties</h2><p>The following properties can be sent by the client with the request:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Property</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>pdfPassword</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>User/open password to use for reading the PDF if it is password protected.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REASON</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>LOCATION</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>CERTIFICATION_LEVEL</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SIGNERCERTCHAIN</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>DIGESTALGORITHM</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>ADD_VISIBLE_SIGNATURE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_CUSTOM_IMAGE_BASE64</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_PAGE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_RECTANGLE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_NAME</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Sets the visible signature in the existing empty signature filed with this name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>VISIBLE_SIGNATURE_CUSTOM_IMAGE_RESIZE_TO_RECTANGLE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>USE_TIMESTAMP</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>EMBED_CRL</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>EMBED_OCSP_RESPONSE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REJECT_PERMISSIONS</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SET_PERMISSIONS</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>REMOVE_PERMISSIONS</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>SET_OWNERPASSWORD</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the worker property with the same name. Only allowed if listed in ALLOW_PROPERTY_OVERRIDE.</p></td></tr></tbody></table></div>
<nav id="ht-post-nav">
        <a href="OpenPGPPlain_Signer.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>OpenPGPPlain Signer</span>
        </a>

        <a href="PDF_Signer_Algorithm_Support.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>PDF Signer Algorithm Support</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>