<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="371000086">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-11-07T13:05:14.858+0000">
    <meta name="exp-page-id" content="371000086">
    <meta name="exp-page-title" content="TimeMonitorManager">
    <meta name="exp-page-version" content="2">
    <meta name="exp-page-scroll-page-id" content="adadbc939465588638d9a932be88130a">
    <meta name="exp-page-created" content="2022-11-14T16:23:58.000+0000">
    <meta name="exp-page-last-modified" content="2024-03-05T09:23:12.342+0000">
    <meta name="exp-page-labels" content="signserveree">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">

    <!-- Additional Meta Tags -->
    <meta name="exp-document-id" content="371111034">
    <meta name="exp-document-title" content="SignServer Documentation">
    <meta name="exp-version-status" content="in-progress">
    <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
    <meta name="exp-version-name" content="Working version">
    <meta name="exp-version-description" content="">
    <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
    <meta name="exp-variant-id" content="">
    <meta name="exp-variant-name" content="">
    <meta name="exp-variant-description" content="">
    <meta name="exp-language-code" content="">
    <meta name="exp-language-name" content="">

    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>TimeMonitorManager</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="TimeMonitorManager-top" pageid="371000086" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Documentation.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=371000086" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Documentation.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Documentation</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Reference.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Reference</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Workers.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Workers</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="Other_Workers.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">Other Workers</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="TimeMonitorManager.html" target="_self" aria-current="page">TimeMonitorManager</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-95c1944e59415893d5f930cd0b6d99da15300ec5bfb7bc428c52696931e275ee"><span class="js-hide-until-loaded">TimeMonitorManager</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <p><span class="status-macro aui-lozenge aui-lozenge-complete">enterprise</span></p><p><br clear="none">Fully qualified class name: <strong>org.signserver.module.timemonitormanager.TimeMonitorManager</strong>.</p><h2 id="TimeMonitorManager-Overview" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Overview</h2><p>Similar to the StatusPropertiesWorker, the TimeMonitorManager also supports setting status properties in the status repository. Additionally, the TimeMonitorManager supports dynamic configuration of the TimeMonitor and also gives a complete view of the state of the TimeMonitor.</p><h2 id="TimeMonitorManager-WorkerProperties" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Worker Properties</h2><p>All worker properties starting with either "TIMEMONITOR." or "TIMESERVER." are sent to the TimeMonitor if it asks for it. For information on available properties, see <a href="TimeMonitor_Configuration.html" data-linked-resource-id="371000477" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="371000477" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000477/TimeMonitor+Configuration" data-scroll-link-target-source-id="371000477">TimeMonitor Configuration</a>.</p><h2 id="TimeMonitorManager-RequestProperties" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Request Properties</h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Property</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>x.VALUE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Where x is a status property: Sets the value of the property</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>x.EXPIRATION</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Where x is a status property: Sets the expiration time for x (x.VALUE must also be specified)</p></td></tr></tbody></table></div><h2 id="TimeMonitorManager-ResponseProperties" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Response Properties</h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>Property</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>x.UPDATE</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The time when the property was written&nbsp;</p></td></tr></tbody></table></div><h2 id="TimeMonitorManager-Statusoutput" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Status output</h2><p>Detailed information about the state of the TimeMonitor is available in the getstatus output of the TimeMonitorManager:</p><ul><li>Time monitor: Indicates if the application is detected to be 'Running', 'Disabled', 'Not running?' or 'Unavailabe'. The state is determined by if the manager has seen an update from the TimeMonitor before the status properties are starting to expire.</li><li>Last update: The last time the TimeMonitor contacted the manager.</li><li>Current time: Current time of the server.</li><li>Time state: The last time state from the TimeMonitor.</li><li>Report state: The last report state from the TimeMonitor.</li><li>Leap state: The last leap state from the TimeMonitor.</li><li>Configuration: Either 'out of sync' or 'up to date' depending on if the current configuration has been read by the TimeMonitor or not. After changing a property in the TimeMonitorManager it is normal that the configuration is marked as 'out of sync' until the TimeMonitor fetches it.</li><li>Status properties values: Prints the current value and possibly the expiration time for the TIMESOURCE0_INSYNC and LEAPSECOND status properties.</li><li>Timings: Prints the current time values from the TimeMonitor.</li><li>Configuration: Prints the configuration values in the manager (not necessarily read by the TimeMonitor yet).</li><li>Last TimeMonitor log entries: Prints the last log entries obtained from the last update from the TimeMonitor.</li></ul><h3 id="TimeMonitorManager-Sampleoutput" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading">Sample output</h3><p>The following displays an example status output:</p><div class="scroll-code scroll-highlighted-code-block" data-language="xml" data-title-type="code" data-theme="defaultnew" style="  counter-reset: scroll-code-numbering 0;"><div class="defaultnew content">
<div class="line"><code class="plain">Status of Worker with ID 300 (TimeMonitorManager) is:</code></div>
<div class="line"><code class="plain"> Worker status : Active</code></div>
<div class="line"><code class="plain"> Time monitor : Running</code></div>
<div class="line"><code class="plain"> Last update : 2017-08-26 11:43:39,176</code></div>
<div class="line"><code class="plain"> Current time : 2017-08-26 11:43:39,580</code></div>
<div class="line"><code class="plain"> Time state : INSYNC</code></div>
<div class="line"><code class="plain"> Report state : REPORTED</code></div>
<div class="line"><code class="plain"> Leap state : NONE</code></div>
<div class="line"><code class="plain"> Configuration : Up to date</code></div>
<div class="line"><code class="plain">Status Repository values:</code></div>
<div class="line"><code class="plain"> TIMESOURCE0_INSYNC: true</code></div>
<div class="line"><code class="plain"> LEAPSECOND: NONE</code></div>
<div class="line"><code class="plain">Timings:</code></div>
<div class="line"><code class="plain"> NTP server time offset: 0 ms</code></div>
<div class="line"><code class="plain"> NTP server query time: 507 ms</code></div>
<div class="line"><code class="plain"> NTP leap status query time: 8 ms</code></div>
<div class="line"><code class="plain"> Report time: 7 ms</code></div>
<div class="line"><code class="plain"> Total required run time: 522 ms</code></div>
<div class="line"><code class="plain">Configuration:</code></div>
<div class="line"><code class="plain"> NTP server hosts: 192.168.30.25</code></div>
<div class="line"><code class="plain"> NTP query samples: 2</code></div>
<div class="line"><code class="plain"> NTP query timeout: 200 ms</code></div>
<div class="line"><code class="plain"> Max accepted offset: 997 ms</code></div>
<div class="line"><code class="plain"> Warn offset: 500 ms</code></div>
<div class="line"><code class="plain"> Status expire time: 900 ms</code></div>
<div class="line"><code class="plain"> Leap status expire time: 60000 ms</code></div>
<div class="line"><code class="plain"> Warn run time: 800 ms</code></div>
<div class="line"><code class="plain"> Minimum run time: 550 ms</code></div>
<div class="line"><code class="plain">Last TimeMonitor log entries:</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:29,253 INFO Started</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:29,287 INFO State changed to: UNKNOWN,REPORTED,UNKNOWN</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:44,255 INFO Config changed to: 1ccdf46b</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:44,782 INFO Time back in calibration: offset abs(0) max accepted offset 997</code></div>
<div class="line"><code class="plain"> 2014-08-26 11:36:44,793 INFO State changed to: INSYNC,REPORTED,NONE</code></div>
</div>
</div>
<nav id="ht-post-nav">
        <a href="StatusPropertiesWorker.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>StatusPropertiesWorker</span>
        </a>

        <a href="TimeMonitorStatusReportWorker.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>TimeMonitorStatusReportWorker</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>