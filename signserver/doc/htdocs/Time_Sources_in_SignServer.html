<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="371000354">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-11-07T13:05:32.486+0000">
    <meta name="exp-page-id" content="371000354">
    <meta name="exp-page-title" content="Time Sources in SignServer">
    <meta name="exp-page-version" content="1">
    <meta name="exp-page-scroll-page-id" content="7f9488abba71baa7b13bb21bf8e038a2">
    <meta name="exp-page-created" content="2022-11-18T14:05:12.000+0000">
    <meta name="exp-page-last-modified" content="2022-11-25T16:52:13.000+0000">
    <meta name="exp-page-labels" content="">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">

    <!-- Additional Meta Tags -->
    <meta name="exp-document-id" content="371111034">
    <meta name="exp-document-title" content="SignServer Documentation">
    <meta name="exp-version-status" content="in-progress">
    <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
    <meta name="exp-version-name" content="Working version">
    <meta name="exp-version-description" content="">
    <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
    <meta name="exp-variant-id" content="">
    <meta name="exp-variant-name" content="">
    <meta name="exp-variant-description" content="">
    <meta name="exp-language-code" content="">
    <meta name="exp-language-name" content="">

    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>Time Sources in SignServer</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="TimeSourcesinSignServer-top" pageid="371000354" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Documentation.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=371000354" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Documentation.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Documentation</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Reference.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Reference</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_TimeMonitor_Application.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer TimeMonitor Application</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="Time_Sources_in_SignServer.html" target="_self" aria-current="page">Time Sources in SignServer</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-264430b8edb75ebb0aef4558cb3b93c2768740afbbf880d840d2a2490e3c5272"><span class="js-hide-until-loaded">Time Sources in SignServer</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <p>A time-stamp signer in SignServer acquires the current time through its configured <strong>TimeSource.</strong> The SignServer <strong>TimeSource</strong> implementation is responsible for returning the time (if available). The time-stamp signer calls the <strong>TimeSource</strong> for every request to get the current time.</p><p>If the current time cannot be acquired from the TimeSource, the time-stamp signer will not issue the time-stamp token and instead respond to the signing request with the failure message: "<em>Time source is not available</em>".</p><h2 id="TimeSourcesinSignServer-Timesourceimplementations" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Time source implementations</h2><p>The following time source implementations are available in SignServer:</p><ul><li>LocalComputerTimeSource: Time received from the local operating system.</li><li>StatusReadingLocalComputerTimeSource: Time received from the local operating system with the additional condition that the time is considered to be in sync with a reliable time source (according to <a class="external-link scroll-external-link" href="https://www.etsi.org/deliver/etsi_en/319400_319499/319421/01.01.01_60/en_319421v010101p.pdf" rel="nofollow" shape="rect" data-scroll-link-type="default" data-scroll-link-target="https://www.etsi.org/deliver/etsi_en/319400_319499/319421/01.01.01_60/en_319421v010101p.pdf" data-scroll-link-local="false">ETSI EN 319 421 - V1.1.1 (2016-03)</a>.</li></ul><h3 id="TimeSourcesinSignServer-Localcomputertimesource" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading">Local computer time source</h3><p>The default implementation is called the <strong>LocalComputerTimeSource</strong> which gets the time from the operating system. Using this <strong>TimeSource</strong> the time is always available, however it relies on the time as configured on the local server which might not be synchronized with a reliable time source. This <strong>TimeSource</strong> will not detect if the time jumps or drifts out of synchronization.</p><h3 id="TimeSourcesinSignServer-Statusreadinglocalcomputertimesource" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3" class="scroll-h3 scroll-original-h3 scroll-relative-h3 scroll-custom-section-heading scroll-document-section-heading">Status reading local computer time source</h3><p>The <strong>TimeSource</strong> implementation <strong>StatusReadingLocalComputerTimeSource</strong> also gets the time from the operating system but only if the time is considered to be in sync with a reliable time source.</p><p>In SignServer, the <strong>StatusRepository</strong> component contains a set of pre-defined named properties. Each property can have a value and an optional expiration time. The value of status properties (and their expiration) can be updated by external applications and/or scripts using the command line interface, or by calling a special worker. Signers can query the <strong>StatusRepository</strong> for the value of a property that has not yet expired.</p><p>The TimeSource will query a property called <a href="TimeMonitor_Configuration.html" data-linked-resource-id="371000477" data-linked-resource-version="2" data-linked-resource-type="page" data-scroll-target-source-id="371000477" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000477/TimeMonitor+Configuration" data-scroll-link-target-source-id="371000477">TIMESOURCE0_INSYNC</a> and if enabled and not expired, the time source will consider the time to be in sync with a reliable time source.</p><p>It is the responsibility of an external application and/or service (such as the <a href="SignServer_TimeMonitor_Overview.html" data-linked-resource-id="371000358" data-linked-resource-version="3" data-linked-resource-type="page" data-scroll-target-source-id="371000358" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/371000358/SignServer+TimeMonitor+Overview" data-scroll-link-target-source-id="371000358">SignServer TimeMonitor</a>) to monitor the status of the local time and update the status property accordingly. By setting the status to <strong>in sync</strong>, the external application asserts that it has checked that the local time was synchronized with some configured accuracy with a reliable time source at the time the property was updated. By also setting an expiration time on the value, the application can indicate a maximum time the assertion is valid, and the application is expected to update the value before that. This assures that if the monitoring application fails for any reason, the value will expire and no more time-stamp tokens are issued until it is back.</p><p>It is assumed that the monitoring application performs its checks of the local time and updates the status properties often as this has a direct impact on the number of time-stamp tokens that could be incorrectly issued after a loss of time synchronization has happened.</p>
<nav id="ht-post-nav">
        <a href="Time_Requirements.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Time Requirements</span>
        </a>

        <a href="SignServer_TimeMonitor_Overview.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>SignServer TimeMonitor Overview</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>