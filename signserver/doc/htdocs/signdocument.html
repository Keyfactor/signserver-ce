<!doctype html>

<html class="no-js" lang="en" data-vp-page-id="370999629">


    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="_scroll_external/attachments/e415105eb31a/ssdocs">

    <!-- Primary Meta Tags -->
    <meta name="exp-export-timestamp" content="2024-11-07T13:04:51.935+0000">
    <meta name="exp-page-id" content="370999629">
    <meta name="exp-page-title" content="signdocument">
    <meta name="exp-page-version" content="2">
    <meta name="exp-page-scroll-page-id" content="1adb369057217f51178fcda41c852777">
    <meta name="exp-page-created" content="2023-07-06T12:38:55.000+0000">
    <meta name="exp-page-last-modified" content="2024-02-17T15:37:08.000+0000">
    <meta name="exp-page-labels" content="">
    <meta name="exp-page-context-keys" content="">
    <meta name="exp-space-key" content="SSDOCS">
    <meta name="exp-space-title" content="SignServer Documentation">

    <!-- Additional Meta Tags -->
    <meta name="exp-document-id" content="371111034">
    <meta name="exp-document-title" content="SignServer Documentation">
    <meta name="exp-version-status" content="in-progress">
    <meta name="exp-version-id" content="8a3e757d15e64586aa644eaf0980f27a">
    <meta name="exp-version-name" content="Working version">
    <meta name="exp-version-description" content="">
    <meta name="exp-version-date" content="2024-02-17T13:18:25Z">
    <meta name="exp-variant-id" content="">
    <meta name="exp-variant-name" content="">
    <meta name="exp-variant-description" content="">
    <meta name="exp-language-code" content="">
    <meta name="exp-language-name" content="">

    <link rel="stylesheet" href="css/app.css">



<script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
    <title>signdocument</title>

<meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>
    <!-- pageid attribute is deprecated - please use data-vp-page-id on html element instead -->
    <body id="signdocument-top" pageid="370999629" class="flex flex-col" data-confluence-editor-version="v1">
        <div id="vp-js-desktop__navigation__skip-to-navigation-link"></div>




<header class="home-icon-container flex justify-between header hc-header-background-color hc-header-background-color ">
    <div class="header__navigation--logo">
        <a href="SignServer_Documentation.html">
            <img src="_scroll_external/attachments/e415105eb31a/ssdocs" alt="SignServer Documentation" title="SignServer Documentation">
        </a>
    </div>
        <div class="top-bar-right no-print header__navigation--large__menu hc-header-background-color">
    

    <div data-vp-id="search-bar-placeholder" data-vp-component="search-bar" class="vp-search-bar" aria-hidden="true">
        <form action="/search.html" method="GET" class="vp-search-bar__input-container">
            <div data-vp-component="search-input" data-vp-variant="border" class="vp-search-input vp-search-input--border">
                <input type="search" id="search-texbox" autocomplete="off" class="vp-search-input__input" style="margin-right: 0;">
                <div class="vp-search-input__icon" aria-hidden="true">
                    <span class="vp-icon material-icons mdi-magnify w-6 h-6 text-icon-md"></span>
                </div>
            </div>
        </form>
        <div id="search-suggestion-container" class="vp-search-suggestion-panel" data-vp-component="search-suggestion"></div>
        <template id="search-suggestion-option-template">
            <div class="vp-search-suggestion-option-container vp-search-form__suggestion">
                <a class="vp-search-suggestion-option vp-search-form__suggestion" href=""></a>
            </div>
        </template>
    </div>

        </div>
</header>

        <main>



<div class="vp-article vp-container vp-container--with-content-padding article vp-container--full full vp-article--wide">
    <div class="flex">

        <div id="exp-navigation-wrapper" class="hidden lg:block">
            <iframe src="toc.html?pageId=370999629" class="border-0"></iframe>
        </div>


        <div class="vp-article__content-panel flex-auto grid-container full js-loading" id="article-content">
            <article role="article">
                <header>
<nav aria-label="Breadcrumb" role="navigation">
    <div class="breadcrumbs-wrapper">
        <ol class="breadcrumbs breadcrumbs--fit-content js-loading js-loading__stacked js-loading__stacked--breadcrumb">
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Documentation.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Documentation</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="SignServer_Integration.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">SignServer Integration</a>
                </li>
                <li class="js-hide-until-loaded">
                    <a href="Client_CLI.html" rel="prev" target="_self" class="js-breadcrumbs-truncate">Client CLI</a>
                </li>
            <li class="breadcrumbs--active js-hide-until-loaded">
                <a href="signdocument.html" target="_self" aria-current="page">signdocument</a>
            </li>
        </ol>
        <div class="breadcrumbs-wrapper__scroll-mask"></div>
    </div>
</nav>
                    <!-- CSS class article__heading is deprecated and will be removed in the future -->
                    <h1 class="cell vp-article__heading article__heading js-loading js-loading__stacked js-loading__stacked--heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-e75535fe6afb17d2b4e50e02a20ad79f56596ad5c1a7a06f246d626f892001a9"><span class="js-hide-until-loaded">signdocument</span></h1>
                </header>
                <section class="page" id="content" role="main">
                    <div id="vp-js-desktop__navigation__skip-to-navigation-target"></div>
                    <div id="main-content" class="wiki-content article__content js-tocBot-content js-hide-until-loaded">
                        <p>Request signing of a document using HTTP(s), REST, Client WS or Web Services.</p><p>The data to send to SignServer can be supplied using one of the following methods (see <a href="signdocument.html#ClientCLIsigndocumentCommand-Sampleusages" data-scroll-target-source-id="370999629" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999629/Client+CLI+signdocument+Command#src-370999629_ClientCLIsigndocumentCommand-Sampleusages" data-scroll-link-target-source-id="370999629">Sample usages</a> below):</p><ul><li>Provided directly on the command line as a string using the <strong>-data</strong> flag. Useful for text input.</li><li>As a path to the file containing the data using the <strong>-infile</strong> flag.</li><li>As a path to folder containing files with the input data using the <strong>-indir</strong> flag and combined with <strong>-outdir</strong> for the response files. This is the so called <a href="signdocument.html#ClientCLIsigndocumentCommand-BatchSigningMode" data-scroll-target-source-id="370999629" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999629/Client+CLI+signdocument+Command#src-370999629_ClientCLIsigndocumentCommand-BatchSigningMode" data-scroll-link-target-source-id="370999629">Batch Signing Mode</a>.</li></ul><p><br clear="none"></p><pre>usage: signdocument &lt;-workername WORKERNAME | -workerid WORKERID&gt;
                    [options] Request a document to be signed by SignServer
 -accesstoken &lt;arg&gt;       Access token to use for JWT authentication. Can
                          not be specified at the same time as -username.
                          Can only be used with protocol HTTP or REST.
  -baseurlpath &lt;arg&gt;      URLPath to call. Default is /signserver.
 &nbsp;-clientside             Hash the file(s) locally, sign the hash
                          server-side, and assemble the resulting file(s)
                          locally. Note: this option is only available in
                          the enterprise edition.
 -data &lt;arg&gt;              Data to send to the worker.
 -digestalgorithm &lt;arg&gt;   Digest algorithm to use for client-side hashing
                          and construction (using the -clientside option).
                          Note: this option is only available in the
                          enterprise edition.
 -extraoption &lt;arg&gt;       Additional options for the command needed for
                          some file-types. The parameters should be given
                          in the form KEY=VALUE. This option can be given
                          multiple times.
 -filetype &lt;arg&gt;          Overrides automatic file-type detection for
                          client-side hashing and construction (possible
                          values PE, MSI, ZIP), default: try to guess
                          based on input. Note: this option is only
                          available in the enterprise edition.
 -host &lt;arg&gt;              Server name or IP address. Default: localhost
 -hosts &lt;arg&gt;             List of server names or IP addresses to try in
                          order.
 -indir &lt;arg&gt;             Directory to read input files from. Required if
                          outdir specified. Can not be combined with
                          infile or outfile.
 -infile &lt;arg&gt;            File to read data to send to the worker from.
 -keyalias &lt;arg&gt;          Alias of the key in the keystore to use for
                          authentication.
 -keyaliasprompt          Ask for which key alias to use in the keystore
                          to use for authentication.
 -keystore &lt;arg&gt;          Keystore with private key and certificate for
                          client certificate authentication.
 -keystorepwd &lt;arg&gt;       Password for reading the keystore.  If keystore
                          is specified but not this keystore password
                          option, the CLI will instead prompt for the
                          password.
 -keystoretype &lt;arg&gt;      Type of keystore. Examples: JKS, PKCS11 and
                          PKCS11_CONFIG.
 -loadbalancing &lt;arg&gt;     Specify if the load balancing feature using
                          round robin should be used. ROUND_ROBIN or NONE.
                          Default: NONE. NONE means no load balancing.
 -metadata &lt;arg&gt;          Additional meta data to send to the signer. The
                          parameters should be given in the form
                          KEY=VALUE. This option can be given multiple
                          times.
 -nohttps                 Do not use HTTPS even if keystore and/or
                          truststore are provided on the command line.
 -onefirst                In batch mode, don't send all requests until the
                          first succeeds. This is primary to prevent too
                          many incorrect password attempts. Default if
                          username is provided and -startall not provided.
 -outdir &lt;arg&gt;            Directory to write output files to. Required if
                          indir specified. Can not be combined with infile
                          or outfile.
 -outfile &lt;arg&gt;           File to write the result to. If not specified
                          result is written to stdout. Must specify
                          -outfile or -outdir when using -clientside.
 -password &lt;arg&gt;          Password for authentication. If username is
                          specified but not this password option, the CLI
                          will instead prompt for the password.
 -passwordfromstdin       Read password from standard input. Useful for
                          scripting. Might also be needed for some
                          terminals which don't support reading from a
                          ConsoleReader. NOTE: when running interactively,
                          this will echo back the password.
 -pdfpassword &lt;arg&gt;       Password for changing the PDF (if required).
 -port &lt;arg&gt;              Server port. Default: 8080 (for HTTP), 8442 for
                          HTTPS and 8443 for HTTPS with client
                          authentication.
 -protocol &lt;arg&gt;          Method of interacting with SignServer. HTTP, REST
                          CLIENTWS or WEBSERVICES. Default: HTTP.
 -removefromindir         Specify this flag to have the successfully
                          processed input files removed from indir.  
 -servlet &lt;arg&gt;           Servlet to call.
 -signkeyalias &lt;arg&gt;      Alias of the key in the keystore to use for
                          signing the requests.
 -signkeyaliasprompt      Ask for which key alias to use in the keystore
                          to use for signing the request(s).
 -signrequest             Sign the request using the specified key from
                          the keystore. Used with the
                          SignedRequestAuthorizer server-side. Requires
                          specifying keystore. Note: this option is only
                          available in the enterprise edition.
 -startall                In batch mode, send all requests at once,
                          without waiting for the first to succeed.
                          Default unless username is provided or -onefirst
                          provided.
 -threads &lt;arg&gt;           Number of threads for sending the requests. Only
                          allowed in batch mode, ie when indir and outdir
                          are specified. Default: 1.
 -timeout &lt;arg&gt;           Timeout limit in milliseconds for connecting to
                          SignServer. If the connection is not established
                          within this time interval it will be considered
                          as a connection failure. Default timeout is
                          system dependent. Specifying as 0 means no
                          timeout.
 -truststore &lt;arg&gt;        Keystore with trusted certificates to use with
                          HTTPS.
 -truststorepwd &lt;arg&gt;     Password for the keystore with trusted
                          certificates. If truststore is specified but not
                          this truststore password option, the CLI will
                          instead prompt for the password.
 -username &lt;arg&gt;          Username for authentication.
 -workerid &lt;arg&gt;          ID of worker which should perform the operation.
 -workername &lt;arg&gt;        Name of worker which should perform the
                          operation.</pre><p><span class="confluence-anchor-link" id="ClientCLIsigndocumentCommand-Sampleusages"></span><span class="confluence-anchor-link" id="Sample usages"></span></p><pre>Sample usages:
a) signdocument -workername XMLSigner -data "&lt;root/&gt;"
b) signdocument -workername XMLSigner -infile /tmp/document.xml
c) signdocument -workerid 2 -data "&lt;root/&gt;" -truststore truststore.jks
-truststorepwd changeit
d) signdocument -workerid 2 -data "&lt;root/&gt;" -keystore superadmin.jks
-keystorepwd foo123
e) signdocument -workerid 2 -data "&lt;root/&gt;" -metadata param1=value1
-metadata param2=value2
f) signdocument -workerid 3 -indir ./input/ -removefromindir -outdir
./output/ -threads 5
g) signdocument -workerid 3 -indir ./input/ -outdir ./output/ -threads 5
-hosts primaryhost,secondaryhost
h) signdocument -workerid 3 -indir ./input/ -outdir ./output/ -threads 5
-hosts primaryhost,secondaryhost,otherhost -timeout 5000
i) signdocument -workerid 3 -indir ./input/ -outdir ./output/ -threads 5
-hosts host1,host2,host3 -loadbalancing ROUND_ROBIN -timeout 5000
j) signdocument -workerid 2 -data "&lt;root/&gt;" -keystoretype PKCS11 -keystore
libcryptoki.so
k) signdocument -workerid 2 -data "&lt;root/&gt;" -keystoretype PKCS11 -keystore
libcryptoki.so -keyaliasprompt
l) signdocument -workerid 2 -data "&lt;root/&gt;" -keystoretype PKCS11 -keystore
libcryptoki.so -keyalias admin3
m) signdocument -workerid 2 -data "&lt;root/&gt;" -keystoretype PKCS11_CONFIG
-keystore sunpkcs11.cfg
n) signdocument -data "&lt;root/&gt;" -servlet /signserver/worker/XMLSigner
o) signdocument -protocol REST -workername XMLSigner -data "&lt;root/&gt;"
p) signdocument -protocol REST -workername XMLSigner -infile /tmp/document.xml</pre><div class="confluence-information-macro confluence-information-macro-information"><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>As of SignServer 6.0, the signature algorithm used to sign the request when using the -signrequest option with an ECDSA key has been changed. Now the algorithm uses a digest algorithm matching the key size (e.g. SHA256withECDSA for secp256r1 keys, SHA384 for secp384r1 keys). The change is a result of changes in the underlying JJWT library.</p></div></div><h2 id="ClientCLIsigndocumentCommand-BatchSigningMode" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Batch Signing Mode</h2><p><span>Instead of specifying the input data using the <strong>-data</strong> flag or specifying one file using <strong>-infile</strong>, you can use the <strong>-indir</strong> and <strong>-outdir</strong> options to process multiple files in one run. This however will not recursively go into subdirectories but will instead skip them. A warning will be printed for each subdirectory but it will not affect the exit code of the command. Before SignServer version 5.9, an error was instead printed and the command would exit with an error code after processing all files.&nbsp;<br clear="none"></span></p><h2 id="ClientCLIsigndocumentCommand-FailoverandLoadBalancingModes" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Failover and Load Balancing Modes</h2><p>SignClient can be used instead of having a load balancer as it is capable of failing over to another host if the current one fails and also has the option to spread the load between multiple servers. These features are configured by specifying additional SignServer <strong>hosts</strong>, setting the connection <strong>timeout</strong> value and the optional <strong>loadbalancing</strong> option.</p><div class="confluence-information-macro confluence-information-macro-warning"><span class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon"></span><div class="confluence-information-macro-body"><p>The failover and load balancing features are limited to the <code>signdocument</code> command and is only supported using the default <strong>-protocol HTTP </strong>or<strong> -protocol REST</strong>.</p></div></div><p><span>You can use the <strong><span>-hosts</span></strong> flag to specify multiple SignServer hosts to send the requests to. If the connection to one host fails, either directly or because of a timeout, the next host in the list is tried instead. To specify a timeout value, use the <strong><span>-timeout</span></strong> flag.</span></p><p><span>Connection failures include cases where the host is not reachable, SignServer is not available (i.e. not started and/or deployed), or the worker is not available (for example due to that the HSM is not activated or the worker is misconfigured). Failures caused by issues with the request, like incorrect input data or wrong credentials etc., are generally not considered connection failures.</span></p><p>Load balancing is by default not used and the default behavior is to use the first host in the list and only if that fails, try the next host in the list, and so on until the request(s) are processed or there are no more hosts to try.</p><p>To enable load balancing, specify the <strong>-</strong><strong>loadbalancing</strong><strong> </strong><strong>ROUND_ROBIN</strong> option. The first host to use is then randomly selected from the list of hosts. If the command is running in <a href="signdocument.html#ClientCLIsigndocumentCommand-BatchSigningMode" data-scroll-target-source-id="370999629" class=" scroll-document-link" data-scroll-link-type="document" data-scroll-link-target="https://keyfactor.atlassian.net/wiki/spaces/SSDOCS/pages/370999629/Client+CLI+signdocument+Command#src-370999629_ClientCLIsigndocumentCommand-BatchSigningMode" data-scroll-link-target-source-id="370999629">Batch Signing Mode</a> (i.e. <strong>-indir</strong> is specified) so there is more than one request to process, the next request will use the next host in the list (the list will wrap-around at the end, continuing with the first host).</p><h2 id="ClientCLIsigndocumentCommand-SmartcardAuthentication" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-h2 scroll-original-h2 scroll-relative-h2 scroll-custom-section-heading scroll-document-section-heading">Smartcard Authentication</h2><p>In addition to using a software keystore for client certificate authentication it is also possible to use a PKCS#11 device like a smart card or a token.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup span="1"><col span="1"><col span="1"></colgroup><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>-keystoretype PKCS11</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>With this keystore type the -keystore option should point to the PKCS#11 (cryptoki) shared library file.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>-keystoretype PKCS11_CONFIG</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>With this keystore type the -keystore options should point to a SunPKCS11 configuration file.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>-keyaliasprompt</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Instead of providing the key alias with -keyalias, this option can be used to have SignClient prompt for which of the matching key alias to use.</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(51,51,51);">-keystorepwd</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(51,51,51);">Smartcard PIN can either be provided on the command line or if this option is not provided instead SignClient will prompt for the PIN.</span></p></td></tr></tbody></table></div>
<nav id="ht-post-nav">
        <a href="Client_CLI.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Client CLI</span>
        </a>

        <a href="validatedocument.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" sketch:type="MSShapeGroup" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>validatedocument</span>
        </a>
</nav>
                    </div>
                </section>
            </article>
        </div>

        <div class="vp-article__aside-right flex-shrink-0 w-1/6 article__toc hidden xl:block no-print">
            <div class="vp-scrollable-container vp-scrollable-container--hidden-scrollbars">
                <div class="js-tocBot">
                                    </div>
            </div>
        </div>

    </div>
</div>
        </main>


        <div id="vp-js-mobile__navigation">
            <div tabindex="-1" class="vp-mobile-navigation__trigger fixed outline-none z-mobile-menu-trigger">
                <button type="button" class="vp-button vp-button--variant-floating-action vp-mobile-navigation__button flex items-center justify-center" aria-label="navigation.open.label">
                    <div class="vp-mobile-navigation__button__icon relative">
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                        <div class="absolute w-full"></div>
                    </div>
                </button>
            </div>
        </div>

        <script src="js/app.js"></script>
    </body>
</html>