<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.0  (Win32)">
	<META NAME="CREATED" CONTENT="20060126;8484600">
	<META NAME="CHANGED" CONTENT="20070520;17520400">
	<STYLE>
	<!--
		@page { size: 21cm 29.7cm; margin: 2cm }
		P { margin-bottom: 0cm; background: transparent; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
		P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-GB }
		P.cjk { font-family: "MS Mincho", "MS ??", monospace; font-size: 12pt; so-language: ja-JP }
		P.ctl { font-family: "Arial Unicode MS", sans-serif; font-size: 12pt; so-language:  }
		H1 { margin-bottom: 0.21cm; background: transparent; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2; page-break-after: auto }
		H1.western { font-family: "Times New Roman", serif; font-size: 14pt; so-language: en-GB }
		H1.cjk { font-family: "MS Mincho", "MS ??", monospace; font-size: 14pt; so-language: ja-JP }
		H1.ctl { font-family: "Arial Unicode MS", sans-serif; font-size: 12pt; so-language: ; font-weight: medium }
		H2 { margin-top: 0.21cm; margin-bottom: 0cm; background: transparent; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
		H2.western { font-size: 14pt; so-language: en-GB; font-style: italic; font-weight: medium }
		H2.cjk { font-family: "MS Mincho", "MS ??", monospace; font-size: 14pt; so-language: ja-JP; font-style: italic; font-weight: medium }
		H2.ctl { font-family: "Arial Unicode MS", sans-serif; font-size: 12pt; so-language: ; font-weight: medium }
		H3 { margin-top: 0cm; margin-bottom: 0cm; background: transparent; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
		H3.western { font-family: "Times", "Times New Roman", serif; so-language: en-GB; font-style: italic; font-weight: medium }
		H3.cjk { font-family: "MS Mincho", "MS ??", monospace; so-language: ja-JP; font-style: italic; font-weight: medium }
		H3.ctl { font-family: "Arial Unicode MS", sans-serif; font-size: 12pt; so-language: ; font-weight: medium }
		TD P { margin-bottom: 0cm; background: transparent; direction: ltr; color: #000000; text-align: left; widows: 2; orphans: 2 }
		TD P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-GB }
		TD P.cjk { font-family: "MS Mincho", "MS ??", monospace; font-size: 12pt; so-language: ja-JP }
		TD P.ctl { font-family: "Arial Unicode MS", sans-serif; font-size: 12pt; so-language:  }
		TH P { margin-bottom: 0cm; background: transparent; direction: ltr; color: #000000; widows: 2; orphans: 2 }
		TH P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-GB; font-style: italic }
		TH P.cjk { font-family: "MS Mincho", "MS ??", monospace; font-size: 12pt; so-language: ja-JP; font-style: italic }
		TH P.ctl { font-family: "Arial Unicode MS", sans-serif; font-size: 12pt; so-language: ; font-style: italic }
		A:link { color: #0000ff }
		A:visited { color: #800080 }
	-->
	</STYLE>
</HEAD>
<BODY LANG="sv-SE" TEXT="#000000" LINK="#0000ff" VLINK="#800080" BGCOLOR="#ffffff" DIR="LTR">
<DIV TYPE=HEADER>
	<P LANG="en-GB"><BR>
	</P>
	<TABLE WIDTH=613 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=5 CELLSPACING=0 RULES=NONE>
		<COL WIDTH=152>
		<COL WIDTH=229>
		<COL WIDTH=115>
		<COL WIDTH=75>
		<TR VALIGN=TOP>
			<TD ROWSPAN=2 WIDTH=152>
				<P LANG="en-GB"><BR>
				</P>
			</TD>
			<TD ROWSPAN=2 COLSPAN=2 WIDTH=354>
				<P LANG="en-GB" ALIGN=CENTER STYLE="margin-left: 1.27cm; margin-top: 0.21cm">
				 <FONT FACE="Verdana, sans-serif"><FONT SIZE=2>SignServer v.2
				Installation Guide</FONT></FONT></P>
			</TD>
			<TD WIDTH=75 HEIGHT=5>
				<P LANG="" STYLE="margin-top: 0.04cm; background: transparent; widows: 2; orphans: 2">
				<FONT COLOR="#800000"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 6pt"><B><SPAN LANG=""><FONT SIZE=1 STYLE="font-size: 6pt"><FONT COLOR="#800000">Sidnr
				/ <I>Page no</I></FONT></FONT></SPAN></B></FONT></FONT></FONT></P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=75 VALIGN=TOP>
				<P LANG="en-GB"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000"><SDFIELD TYPE=PAGE SUBTYPE=RANDOM FORMAT=PAGE>11</SDFIELD>
				<FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt"><FONT FACE="Verdana, sans-serif"><FONT SIZE=3><SPAN LANG="en-GB">(<SDFIELD TYPE=DOCSTAT SUBTYPE=PAGE FORMAT=ARABIC>11</SDFIELD>)</FONT></SPAN></FONT></FONT></SPAN></FONT></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD COLSPAN=2 WIDTH=391 HEIGHT=1>
				<P LANG="" STYLE="margin-top: 0.04cm; background: transparent"><FONT COLOR="#800000"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 6pt"><B><SPAN LANG=""><FONT SIZE=1 STYLE="font-size: 6pt"><FONT COLOR="#800000">Uppgjort
				/ <I>Author	</I></FONT></FONT></SPAN></B></FONT></FONT></FONT></P>
			</TD>
			<TD COLSPAN=2 WIDTH=200>
				<P LANG="" STYLE="margin-top: 0.04cm; background: transparent; widows: 2; orphans: 2">
				<FONT COLOR="#800000"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 6pt"><B><SPAN LANG=""><FONT SIZE=1 STYLE="font-size: 6pt"><FONT COLOR="#800000">Sekretess
				/ <I>Confidentiality</I></FONT></FONT></SPAN></B></FONT></FONT></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD COLSPAN=2 WIDTH=391 HEIGHT=5>
				<P LANG="en-GB"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt"><B>Philip
				Vendil</B></FONT></FONT></P>
				<P LANG="en-GB"><BR>
				</P>
			</TD>
			<TD COLSPAN=2 WIDTH=200>
				<P LANG="" STYLE="background: transparent"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt"><B>UNRESTRICTED</B></FONT></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD COLSPAN=2 WIDTH=391 HEIGHT=1>
				<P LANG="" STYLE="margin-top: 0.04cm; background: transparent; widows: 2; orphans: 2">
				<FONT COLOR="#800000"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 6pt"><B><SPAN LANG=""><FONT SIZE=1 STYLE="font-size: 6pt"><FONT COLOR="#800000">Godk&auml;nd
				/ <I>Authorized</I></FONT></FONT></SPAN></B></FONT></FONT></FONT></P>
			</TD>
			<TD WIDTH=115>
				<P LANG="" STYLE="margin-top: 0.04cm; background: transparent; widows: 2; orphans: 2">
				<FONT COLOR="#800000"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 6pt"><B><SPAN LANG=""><FONT SIZE=1 STYLE="font-size: 6pt"><FONT COLOR="#800000">Datum
				  <I>Date</I></FONT></FONT></SPAN></B></FONT></FONT></FONT></P>
			</TD>
			<TD WIDTH=75>
				<P LANG="" STYLE="margin-top: 0.04cm; background: transparent; widows: 2; orphans: 2">
				<FONT COLOR="#800000"><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 6pt"><B>Version</B></FONT></FONT></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD COLSPAN=2 WIDTH=391 HEIGHT=4>
				<P LANG="en-GB"><BR>
				</P>
			</TD>
			<TD WIDTH=115>
				<P LANG="en-GB" ALIGN=LEFT><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt">2007-05-20</FONT></FONT></P>
				<P LANG="en-GB" ALIGN=LEFT><BR>
				</P>
			</TD>
			<TD WIDTH=75>
				<P LANG=""><FONT FACE="Verdana, sans-serif"><FONT SIZE=1 STYLE="font-size: 8pt"><B>1.0</B></FONT></FONT></P>
			</TD>
		</TR>
	</TABLE>
	<P LANG="en-GB" CLASS="western" STYLE="margin-bottom: 3.92cm"><BR>
	</P>
</DIV>
<P LANG="en-GB" ALIGN=CENTER STYLE="margin-left: 1.28cm; text-indent: 0cm; margin-top: 3.18cm; margin-bottom: 0.85cm; line-height: 0.85cm; page-break-inside: avoid; page-break-after: avoid">
<FONT FACE="Verdana, sans-serif"><FONT SIZE=6 STYLE="font-size: 28pt"><B><SPAN LANG="en-US"><FONT COLOR="#000000"><FONT SIZE=6 STYLE="font-size: 28pt"><FONT FACE="Helvetica, sans-serif"><BR>SignServer
2.0</FONT></FONT><FONT SIZE=5><BR><BR>Installation Guide</FONT></FONT></SPAN></B></FONT></FONT></P>
<P LANG="en-GB" CLASS="western">								</P>
<P LANG="en-GB" CLASS="western" ALIGN=CENTER><FONT SIZE=3>Written By</FONT></P>
<P LANG="en-GB" CLASS="western" ALIGN=CENTER><SPAN LANG="en-GB"><FONT SIZE=3><FONT COLOR="#000000">Philip
Vendil, </FONT></FONT></SPAN><FONT COLOR="#0000ff"><U><A HREF="mailto:philip@primekey.se"><SPAN LANG="en-GB"><FONT SIZE=3><FONT COLOR="#000000">philip@primekey.se</FONT></FONT></SPAN></A></U></FONT><SPAN LANG="en-GB"><FONT SIZE=3><FONT COLOR="#000000"><BR>+46709885814</FONT></FONT></SPAN></P>
<P CLASS="western"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-top: 0.35cm; font-weight: medium"><FONT FACE="Times, Times New Roman, serif"><FONT SIZE=5>2007-05-20</FONT></FONT></P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><BR>
</P>
<P LANG="en-GB" ALIGN=CENTER STYLE="margin-top: 0.35cm"><BR>
</P>
<P ALIGN=CENTER><BR>
</P>
<H1 LANG="en-GB" CLASS="western" STYLE="page-break-before: always"><FONT SIZE=4><B>1 
Introduction/Scope</B></FONT></H1>
<P LANG="en-GB" CLASS="western"><FONT SIZE=3>This document describes
step by step instructions on how to install SignServer on a cluster
using Cent OS 4.4 as a platform, but should be quite easy to adjust
to other platforms or to run as a single node.</FONT></P>
<P LANG="en-GB" CLASS="western"><BR>
</P>
<P LANG="en-GB" CLASS="western"><FONT SIZE=3>A cluster consist of of
three different components, one management component, one staging
component, and service components (regular nodes in the cluster). </FONT>
</P>
<P LANG="en-GB" CLASS="western">  <FONT SIZE=3>The management
component contains a small mysql cluster daemon, managing the mysql.
This process doesn't require much performance but cannot be run on a
service component running a mysql cluster data node.</FONT></P>
<P LANG="en-GB" CLASS="western">  <FONT SIZE=3>The staging component
is where the building, deploying and daily operation of the cluster
is performed. It requires the installation of the SignServer code.
The staging component can be run on either on the same server as the
management component or on on of the service components.</FONT></P>
<P LANG="en-GB" CLASS="western">  <FONT SIZE=3>A service component
runs a Mysql Cluster data node and a JBoss instance and performs the
actual service. </FONT>
</P>
<P LANG="en-GB" CLASS="western"><BR>
</P>
<P LANG="en-GB" CLASS="western"><FONT SIZE=3>In a cluster of two
service components is there a requirements of three servers, but the
management server don't need any performance and doesn't need to be
dedicated for its task.</FONT></P>
<P LANG="en-GB" CLASS="western"><BR>
</P>
<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=3><FONT COLOR="#000000">The
installation instructions have been marked on which of the three
components it belongs to by a (</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#000000">)
for the management component, (</FONT><FONT COLOR="#008000">STAGE</FONT><FONT COLOR="#000000">)
for the stage component and (</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)
for the service component.</FONT></FONT></SPAN></P>
<P LANG="en-GB" CLASS="western"><BR>
</P>
<P LANG="en-GB" CLASS="western"><IMG SRC="SignServer_2_0_Installation_Guide_html_2314c312.jpg" NAME="graphics1" ALIGN=LEFT WIDTH=642 HEIGHT=329 BORDER=0><BR CLEAR=LEFT><BR>
</P>
<P LANG="en-GB" CLASS="western"><BR>
</P>
<H1 LANG="en-GB" CLASS="western" ALIGN=LEFT><FONT SIZE=4><B>2 Document
History</B></FONT></H1>
<P LANG="en-GB" CLASS="western"><BR>
</P>
<TABLE WIDTH=643 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=64>
	<COL WIDTH=62>
	<COL WIDTH=90>
	<COL WIDTH=393>
	<THEAD>
		<TR VALIGN=TOP>
			<TH WIDTH=64>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=3><I><B>Version</B></I></FONT></P>
			</TH>
			<TH WIDTH=62>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=3><I><B>Date</B></I></FONT></P>
			</TH>
			<TH WIDTH=90>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=3><I><B>Name</B></I></FONT></P>
			</TH>
			<TH WIDTH=393>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=3><I><B>Comment</B></I></FONT></P>
			</TH>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=64>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=2>1.0</FONT></P>
			</TD>
			<TD WIDTH=62>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=2>2007-05-20</FONT></P>
			</TD>
			<TD WIDTH=90>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=2>Philip Vendil</FONT></P>
			</TD>
			<TD WIDTH=393>
				<P LANG="en-GB" CLASS="western"><FONT SIZE=2>Initial version of
				the document.</FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=64>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=62>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=90>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=393>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=64>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=62>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=90>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
			<TD WIDTH=393>
				<P LANG="en-GB" CLASS="western"><BR>
				</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<DIV ID="Section1" DIR="LTR">
	<P STYLE="margin-top: 0.42cm; page-break-after: avoid"><FONT SIZE=4><B>Table
	of Contents</B></FONT></P>
</DIV>
<DIV ID="Table of Contents1" DIR="LTR">
	<P LANG="en-GB">1   Introduction/Scope	2</P>
	<P LANG="en-GB">2  Document History	3</P>
	<P LANG="en-GB">3  Required Software	4</P>
	<P LANG="en-GB">4  Prerequisites 	4</P>
	<P LANG="en-GB">5  Installation Instructions	4</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.1
	Installation of Java environment (STAGE), (SERVICE)	4</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.2
	Installation of Ant (java build tool, same as make in c)  (STAGE)	5</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.3
	Installation of Jboss (SERVICE)	5</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.3.1
	Install Mysql JDBC drivers	5</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.3.2
	Remove debugging log	5</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.4
	Set the environment (STAGE), (SERVICE) 	6</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.5
	Set up Mysql Cluster  (SERVICE), (MGMT)	6</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.5.1
	Set up the management node (MGMT)	6</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.5.2
	Set up a service node (SERVICE) 	7</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.5.3
	Testing that the Mysql Cluster is set up properly	8</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.6
	Installation SignServer (STAGE)	9</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.6.1
	preinstall SignServer (STAGE)	9</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.6.2
	Configuration of the SignServer	10</P>
	<P LANG="en-GB" STYLE="margin-left: 0.35cm; text-indent: 0cm">5.7
	Test the installation	11</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.7.1
	The automated test script	11</P>
	<P LANG="en-GB" STYLE="margin-left: 0.71cm; text-indent: 0cm">5.7.2
	The test client	11</P>
	<P LANG="en-GB">6  More Information 	11</P>
</DIV>
<DIV ID="Section3" DIR="LTR">
	<H1 LANG="en-GB" CLASS="western" ALIGN=LEFT STYLE="margin-left: 1.52cm">
	</H1>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H1 LANG="en-GB" CLASS="western" STYLE="page-break-before: always"><FONT SIZE=4><B>3 Required
	Software</B></FONT></H1>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">MySQL-server-5.0.27-0.i386.rpm
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">MySQL-Max-5.0.27-0.i386.rpm
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">MySQL-client-5.0.27-0.i386.rpm
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)(</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">MySQL-ndb-management-5.0.27-0.glibc23.i386.rpm
	(</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">MySQL-ndb-storage-5.0.27-0.glibc23.i386.rpm
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">MySQL-ndb-tools-5.0.27-0.glibc23.i386.rpm
	(</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">perl-HTML-Template-2.7-2.noarch.rpm
	(</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">mysql-connector-java-3.1.10.tar.gz
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2 STYLE="font-size: 9pt"><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">jdk-6-linux-i586.bin
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2 STYLE="font-size: 9pt"><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">jce_policy-6.zip
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2 STYLE="font-size: 9pt"><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">apache-ant-1.7.0-bin.tar.gz
	(</FONT><FONT COLOR="#008000">STAGE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">Jboss-4.0.5-GA.zip
	(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">signserver_2_&lt;version&gt;.zip
	(</FONT><FONT COLOR="#008000">STAGE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>If you are going to
	set-up the service with HTTPS you also need the follwing:</FONT></FONT></P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>And the files:</FONT></FONT></P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">1
	JKS key store, used as server authentication for HTTPS, in this
	manual it is called tomcat.jks, Important, since the jks will be
	used in a cluster it must contain all the IP addresses in multiple
	'IP Address' Subject Alternative Name fields. (</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#000000">)</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>1 CA certificate on
	the CA issuing the client certificate, in DER format used for setup
	of the client authentication. (<FONT COLOR="#b80047">SERVICE</FONT>)</FONT></FONT></P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<H1 LANG="en-GB" CLASS="western" ALIGN=LEFT><FONT SIZE=4><B>4 Prerequisites
	</B></FONT>
	</H1>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>These instructions
	prerequisite a standard CentOS 4.4 installation.</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H1 LANG="en-GB" CLASS="western" ALIGN=LEFT><FONT SIZE=4><B>5 Installation
	Instructions</B></FONT></H1>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>First copy all of the
	software packages to a location on the server. This location will</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>in the following
	instructions be called &lt;soft-dir&gt;</FONT></P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	5.1<I><FONT SIZE=4><SPAN LANG="en-GB"><FONT COLOR="#000000">Installation
	of Java environment (</FONT><FONT COLOR="#008000">STAGE),<FONT FACE="Times New Roman, serif">
	</FONT></FONT></SPAN><FONT COLOR="#008000"><FONT FACE="Times New Roman, serif"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US">(</SPAN></SPAN></SPAN></FONT></FONT><FONT FACE="Times New Roman, serif"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#008000">)</FONT></SPAN></SPAN></SPAN></FONT></FONT></I></H2>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">cp
	&lt;soft-dir&gt;/jdk-6-linux-i586.bin  /opt/</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">cd
	/opt</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">chmod
	+x jdk-6-linux-i586.bin</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">./jdk-6-linux-i586.bin
	 (and use all default settings)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">ln
	-s jdk1.6.0 java</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">rm
	jdk-6-linux-i586.bin </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>The install the high
	encryption pack.</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">cp
	&lt;soft-dir&gt;/jce_policy-6.zip /opt</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">unzip
	jce_policy-6.zip</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">sudo
	cp jce/*.jar java/jre/lib/security/</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">rm
	-rf jce</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">rm
	jce_policy-6.zip</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	5.2<I><SPAN LANG="en-GB"><FONT SIZE=4><FONT COLOR="#000000">Installation
	of Ant (java build tool, same as make in c)  (</FONT><FONT COLOR="#008000">STAGE)</FONT></FONT></SPAN></I></H2>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">cp
	&lt;soft-dir&gt;/apache-ant-1.7.0-bin.tar.gz /opt</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">tar
	zxf apache-ant-1.7.0-bin.tar.gz</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">ln
	-s apache-ant-1.7.0 ant</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">rm
	apache-ant-1.7.0-bin.tar.gz</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	5.3<I><FONT SIZE=4><SPAN LANG="en-GB"><FONT COLOR="#000000">Installation
	of Jboss </FONT></SPAN><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT FACE="Times New Roman, serif"><FONT COLOR="#008000">(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#008000">)</FONT></FONT></SPAN></SPAN></SPAN></FONT></I></H2>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>sudo
	adduser jboss</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT SIZE=3>Set an temporary
	password</FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>sudo
	passwd -l jboss</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT SIZE=3>Install jboss in user
	jboss home directory</FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cp
	&lt;softwaredir&gt;/jboss-4.0.5-GA.zip /opt</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/opt</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>unzip
	jboss-4.0.5-GA.zip</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s jboss-4.0.5-GA jboss</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>mkdir
	jboss/server/default/log</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>mkdir
	jboss/server/default/tmp</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>mkdir
	jboss/server/default/work</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>mkdir
	jboss/server/default/data</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/opt/jboss/server/default/deploy</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>rm
	-rf management</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>rm
	-rf jmx-console.war</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	jbossweb-tomcat55.sar</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>rm
	-rf ROOT.war</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/opt/jboss/server</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>chown
	-R jboss.jboss *</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western" STYLE="font-weight: medium; page-break-after: avoid">
	<FONT SIZE=4><I>5.3.1Install Mysql JDBC drivers</I></FONT></H3>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cp
	&lt;softwaredir&gt;/mysql-connector-java-3.1.10.tar.gz /opt</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/opt</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>tar
	zxf mysql-connector-java-3.1.10.tar.gz</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>rm
	mysql-connector-java-3.1.10.tar.gz</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cp
	/opt/mysql-connector-java-3.1.10/mysql-connector-java-3.1.10-bin.jar
	/opt/jboss/server/default/lib</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western" STYLE="font-weight: medium; page-break-after: avoid">
	<FONT SIZE=4><I>5.3.2Remove debugging log</I></FONT></H3>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT SIZE=3>Remove debugging log by
	editing</FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>'/opt/jboss/server/default/conf/log4j.xml'</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT SIZE=3>On line 28 add the
	following line</FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>&lt;param
	name=&acute;&acute;Threshold&acute;&acute; value=&acute;&acute;INFO&acute;&acute;/&gt;</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	5.4<I><FONT SIZE=4><SPAN LANG="en-GB"><FONT COLOR="#000000">Set the
	environment (</FONT><FONT COLOR="#008000">STAGE), </FONT></SPAN><FONT COLOR="#008000"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT FACE="Times New Roman, serif">(</FONT></SPAN></SPAN></SPAN></FONT><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT FACE="Times New Roman, serif"><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#008000">)
	</FONT></FONT></SPAN></SPAN></SPAN></FONT></I>
	</H2>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Edit the file
	/etc/profile</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Add the following to
	the end:</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>On the staging
	component:</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	PATH=$PATH:/opt/java/bin:/opt/ant/bin</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	ANT_HOME=/opt/ant</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	JAVA_HOME=/opt/java</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	JBOSS_HOME=/opt/jboss</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	SIGNSERVER_HOME=/opt/signserver</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New"><FONT SIZE=2>On
	a service component:</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	PATH=$PATH:/opt/java/bin</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	JAVA_HOME=/opt/java</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	JBOSS_HOME=/opt/jboss</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">export
	JAVA_OPTS=&quot;-Xms512m -Xmx512m&quot;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT COLOR="#000000"><SPAN LANG="en-US"><FONT SIZE=2 STYLE="font-size: 9pt"><FONT FACE="Courier New, monospace">export
	</FONT></FONT></SPAN><FONT SIZE=2><FONT FACE="Courier New"><SPAN LANG="en-GB">SIGNSERVER_NODEID</SPAN><SPAN LANG="en-US">=&lt;unique
	name of server&gt; (Can be any name as long as it is unique)</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>If STAGE and SERVICE is
	run on the same service must the environment variables be merged.</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Then save the file and
	run</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2 STYLE="font-size: 9pt">.
	/etc/profile </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>and make sure the
	settings have been set.</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	5.5<I><FONT SIZE=4><SPAN LANG="en-GB"><FONT COLOR="#000000">Set up
	Mysql Cluster  </FONT></SPAN><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT FACE="Times New Roman, serif"><FONT COLOR="#008000">(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#008000">),
	(</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#008000">)</FONT></FONT></SPAN></SPAN></SPAN></FONT></I></H2>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western" STYLE="page-break-after: avoid">5.5.1<SPAN STYLE="font-weight: medium"><I><FONT SIZE=4><SPAN LANG="en-GB"><FONT COLOR="#000000">Set
	up the management node </FONT></SPAN><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT FACE="Times New Roman, serif"><FONT COLOR="#008000">(</FONT><FONT COLOR="#000080">MGMT</FONT><FONT COLOR="#008000">)</FONT></FONT></SPAN></SPAN></FONT></I></SPAN></H3>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uvh </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">perl-HTML-Template-2.7-2.noarch.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uvh </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-ndb-tools-5.0.27-0.glibc23.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uvh </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-ndb-management-5.0.27-0.glibc23.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uvh </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-client-5.0.27-0.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>mkdir
	/var/lib/mysql-cluster</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">cp
	$SIGNSERVER_HOME/docs/sample-configs</SPAN><SPAN LANG="en-US">/<SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none">config.ini.cluster
	/var/lib/mysql-cluster/config.ini </SPAN></SPAN></SPAN></FONT></FONT></FONT>
	</P>
	<P LANG="en-US" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>edit
	the config.ini with </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>vi
	/var/lib/mysql-cluster/config.ini</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>And
	change the IP addresses of the management node and service nodes,
	management node under [ndb_mgmd] and service nodes under [ndbd]</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"> 
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">cp
	$SIGNSERVER_HOME/docs/sample-configs</SPAN><SPAN LANG="en-US">/</SPAN><SPAN LANG="en-GB">ndb_mgmd.start
	/etc/init.d/ndb_mgmd</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>chmod
	u+x /etc/init.d/ndb_mgmd </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/etc/rc3.d/</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndb_mgmd  S57ndb_mgmd </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndb_mgmd K14ndb_mgmd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/etc/rc5.d/</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndb_mgmd  S57ndb_mgmd </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndb_mgmd K14ndb_mgmd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Start
	up the management node with</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>/etc/init.d/ndb_mgmd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Then
	start the console with</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ndb_mgm</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>and
	use the command 'show' to show the current setup.</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Then
	it's time to set up the database on all the service nodes.</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western" STYLE="page-break-after: avoid">5.5.2<SPAN STYLE="font-weight: medium"><I><FONT SIZE=4><SPAN LANG="en-GB"><FONT COLOR="#000000">Set
	up a service node </FONT></SPAN><SPAN STYLE="text-decoration: none"><SPAN LANG="en-US"><FONT FACE="Times New Roman, serif"><FONT COLOR="#008000">(</FONT><FONT COLOR="#b80047">SERVICE</FONT><FONT COLOR="#008000">)
	</FONT></FONT></SPAN></SPAN></FONT></I></SPAN>
	</H3>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uhv </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-server-5.0.27-0.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uhv </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-ndb-storage-5.0.27-0.glibc23.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uvh </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-client-5.0.27-0.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">rpm
	-Uvh </SPAN><SPAN LANG="en-US">&lt;softwaredir&gt;/</SPAN><SPAN LANG="en-GB">MySQL-Max-5.0.27-0.i386.rpm</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">cp
	$SIGNSERVER_HOME/docs/sample-configs</SPAN><SPAN LANG="en-US">/<SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none">my.cnf.cluster</SPAN></SPAN>
	/etc/my.cnf</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Edit
	the file with vi /etc/my.cnf</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>row
	47 : bind-address=&lt;the external ip addres&gt;</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>row
	161 : ndb-connectstring=&lt;IP address of the mysql cluster mgmt
	node&gt;</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>row
	164 : ndb-connectstring=&lt;IP address of the mysql cluster mgmt
	node&gt;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Start
	the ndbd deamon with</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/var/lib/mysql-cluster</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ndbd
	&ndash;initial (This must only be done once, the --initial  creates
	the database, from thereafter start ndbd with /etc/init.d/ndbd)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000"><SPAN LANG="en-GB">cp
	$SIGNSERVER_HOME/docs/sample-configs</SPAN><SPAN LANG="en-US">/</SPAN><SPAN LANG="en-GB">ndbd.startup
	/etc/init.d</SPAN></FONT></FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>chmod
	u+x /etc/init.d/ndbd </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/etc/rc3.d/</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndbd S57ndbd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/mysql S58mysql</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndbd K14ndbd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/mysql K15mysql</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/etc/rc5.d/</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndbd S57ndbd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/mysql S58mysql</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/ndbd K14ndbd</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	-s /etc/init.d/mysql K15mysql</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT COLOR="#000000"><FONT SIZE=3><FONT FACE="Times New Roman, serif">Restart
	mysql with</FONT></FONT><FONT SIZE=2><FONT FACE="Courier New, monospace">
	</FONT></FONT></FONT></SPAN>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>/etc/init.d/mysqld
	restart</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Set
	a root mysql password with</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>mysqladmin
	password -u root &lt;password&gt;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Start mysql console and
	log in as mysql user 'root'</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Create the signserver
	database with the command (this must be done on all the service
	nodes):</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>create
	database signserver;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">grant
	all on signserver.* to signserver</FONT></FONT></FONT></SPAN><FONT COLOR="#0000ff"><A HREF="mailto:ejbca@localhost"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">@localhost</FONT></FONT></FONT></SPAN></SPAN></A></FONT><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">
	identified by '&lt;somepasswd&gt;';</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">grant
	all on signserver.* to signserver</FONT></FONT></FONT></SPAN><FONT COLOR="#0000ff"><A HREF="mailto:ejbca@localhost"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">@&lt;IP
	of node1&gt;</FONT></FONT></FONT></SPAN></SPAN></A></FONT><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">
	identified by '&lt;somepasswd&gt;';</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">grant
	all on signserver.* to signserver</FONT></FONT></FONT></SPAN><FONT COLOR="#0000ff"><A HREF="mailto:ejbca@localhost"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">@</FONT></FONT></FONT></SPAN></SPAN></A><A HREF="mailto:ejbca@localhost"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">&lt;IP
	of node1&gt; </FONT></FONT></FONT></SPAN></SPAN></A></FONT><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">identified
	by '&lt;somepasswd&gt;';</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">grant
	all on signserver.* to signserver</FONT></FONT></FONT></SPAN><FONT COLOR="#0000ff"><A HREF="mailto:ejbca@localhost"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">@&lt;IP
	of node2&gt; </FONT></FONT></FONT></SPAN></SPAN></A></FONT><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">identified
	by '&lt;somepasswd&gt;';</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western" STYLE="font-weight: medium; page-break-after: avoid">
	<FONT SIZE=4><I>5.5.3Testing that the Mysql Cluster is set up
	properly</I></FONT></H3>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>When the ndbd deamon
	have been started on all the cluster, issue a new 'show' in the
	ndb_mgm console on the management node, it should show something
	like:</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>ndb_mgm&gt;
	show</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>Cluster
	Configuration</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>---------------------</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>[ndbd(NDB)]
	    3 node(s)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=2
	   @213.212.2.123  (Version: 5.0.27, Nodegroup: 0)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=3
	   @213.212.2.124  (Version: 5.0.27, Nodegroup: 0, Master)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=4
	   @213.212.2.125  (Version: 5.0.27, Nodegroup: 0)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>[ndb_mgmd(MGM)]
	1 node(s)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=1
	   @213.212.2.120  (Version: 5.0.27)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>[mysqld(API)]
	  3 node(s)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=5
	   @213.212.2.124  (Version: 5.0.27)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=6
	   @213.212.2.125  (Version: 5.0.27)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>id=7
	   @213.212.2.123  (Version: 5.0.27)</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>When everything is OK.
	All ndbd nodes must be started before any of the mysqld daemons will
	connect.</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Tip, if nodes have
	problems to connect it sometimes helps issuing the command 'PURGE
	STALE SESSIONS' in the ndb_mgm console.</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>The test that all
	service nodes can connect to each other by issuing on all the nodes.</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>mysql -h &lt;nodeip&gt;
	-D signserver -u signserver -p</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Then log on to one of
	the mysql consoles on one of the service nodes and issue the
	commands:</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>use
	signserver;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>create
	table ctest (i INT);</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>insert
	into ctest values (1);</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>Then log into the two
	other nodes mysql consoles and issue:</FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>use
	signserver;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier, Courier New, monospace"><FONT SIZE=2>select
	* from ctest;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>and check that the '1'
	have been set.</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	5.6<I><SPAN LANG="en-GB"><FONT SIZE=4><FONT COLOR="#000000">Installation
	SignServer (</FONT><FONT COLOR="#008000">STAGE)</FONT></FONT></SPAN></I></H2>
	<H3 LANG="en-GB" CLASS="western" STYLE="page-break-after: avoid">5.6.1<SPAN STYLE="font-weight: medium"><I><SPAN LANG="en-GB"><FONT SIZE=4><FONT COLOR="#000000">preinstall
	SignServer (</FONT><FONT COLOR="#008000">STAGE)</FONT></FONT></SPAN></I></SPAN></H3>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>First
	generate a SSH key on the staging machine that will be used for the
	scp copying to the other SERVICE servers.</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>On
	the STAGING machine do:</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>su
	&ndash; jboss</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ssh-keygen
	-t rsa -b 2048</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Make
	sure the /home/jboss/.ssh directory isn't world/group readable as
	well as the id_rsa file.</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>The
	copy the contents of id_rsa.pub to all the other SERVICE servers to
	a file</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>called
	/home/jboss/.ssh/authorized_keys and make sure only the jboss user
	have write access to the .ssh directory and the authorized_keys</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Then
	from the STAGING server connect to all the other (including itself,
	if it is used as a SERVICE component as well). And accept all the
	remote keys so they are in the known_hosts file.</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=3><FONT FACE="Times New Roman, serif"><FONT COLOR="#000000">If
	you are going to use HTTPS. </FONT><FONT COLOR="#000000">Then
	configure the Java Key Store of the Staging server. (This command
	must  be run as root) </FONT></FONT></FONT><FONT COLOR="#000000"><FONT SIZE=2><FONT FACE="Courier New, monospace">ant
	<SPAN STYLE="text-decoration: none">install (</SPAN></FONT></FONT><SPAN STYLE="text-decoration: none"><FONT SIZE=3><FONT FACE="Times New Roman, serif">from
	SIGNSERVER_HOME)</FONT></FONT></SPAN></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western" STYLE="text-decoration: none"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>What
	this task do is removing the old java cacert truststore located at
	$JAVA_HOME/jre/lib/security/cacerts and creating a new on with the
	specified CA certificate imported. After this, copy the 'cacerts'
	file to all of the Service nodes into the directory
	'$JAVA_HOME/jre/lib/security/' and make sure it is only writeable as
	root. The reason this cannot be done automatically is that the ant
	setup cannot write with root privileges. </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cp
	&lt;softwaredir&gt;/signserver_&lt;version&gt;.zip /opt</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/opt</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>unzip
	signserver_&lt;version&gt;.zip</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ln
	&ndash;s signserver_&lt;version&gt;  signserver</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	signserver</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cp
	signserver_build.properties.sample signserver_build.properties</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>vi
	signserver_build.properties</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Times New Roman, serif"><FONT SIZE=3>uncomment the rows
	and change to: </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">row
	20: </FONT></SPAN></SPAN><FONT COLOR="#000000">server.java.target=1.6</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>row
	21: client.java.target=1.6</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT SIZE=3><FONT FACE="Times New Roman, serif">if
	you aren't using https uncomment</FONT></FONT>:</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New"><FONT SIZE=2>row 50: j2ee.web-nohttps=true </FONT></FONT>
	</P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New"><FONT SIZE=2><FONT SIZE=3><FONT FACE="Times New Roman, serif">If
	you are using htts do the following unstead</FONT></FONT>:</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>row
	56: java.trustpassword=changeit</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">row
	59: </FONT></SPAN></SPAN><FONT COLOR="#000000">java.trustcert=&lt;Path
	to root ca certificate&gt;</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>row
	62: httpsserver.password=&lt;Password of JKS keystore&gt;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 66:
	httpsserver.keystore=&lt;Path to JKS keystore&gt;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Times New Roman, serif"><FONT SIZE=3>Next configure the
	database:</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 98:
	database.name=mysql</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 110:
	datasource.mapping=mySQL</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 125:
	database.url=jdbc:mysql://&lt;IP nod1&gt;,&lt;IP
	nod2&gt;:3306/signserver</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">row
	133: </FONT></SPAN></SPAN><FONT COLOR="#000000">database.use.mysqlcluster=true</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 138:
	database.driver=com.mysql.jdbc.Driver</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 146:
	database.username=signserver</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<FONT FACE="Courier New, monospace"><FONT SIZE=2>row 151:
	database.password=&lt;somepasswd&gt;</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western" STYLE="font-weight: medium; text-decoration: none">
	<BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">row
	166: </FONT></SPAN></SPAN><FONT COLOR="#000000">deploy.hostname.node1=</FONT><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">&lt;IP
	nod1&gt;</FONT></SPAN></SPAN></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">row
	167: deploy.hostname.node2=&lt;IP nod2&gt;</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">row
	168: deploy.hostname.node3=&lt;IP nod3&gt;</FONT></FONT></FONT></SPAN></SPAN></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">row
	187: </FONT></SPAN></SPAN><FONT COLOR="#000000">deploy.ssh.appsrvhome=</FONT><SPAN STYLE="font-weight: medium"><SPAN STYLE="text-decoration: none"><FONT COLOR="#000000">/opt/jboss</FONT></SPAN></SPAN></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Then
	edit the file /opt/signserver/signserver_cli.properties</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>and
	change the rows:</FONT></FONT></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">row
	10: </FONT><FONT COLOR="#000000">hostname.masternode=</FONT><FONT COLOR="#000000">&lt;IP
	of NOD1&gt; </FONT></FONT></FONT><FONT COLOR="#000000"><FONT SIZE=3><FONT FACE="Times New Roman, serif">(Used
	as default nod to call for operations that becomes global.)</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=2><FONT FACE="Courier New, monospace"><FONT COLOR="#000000">row
	12: </FONT><FONT COLOR="#000000">hostname.allnodes=&lt;IP of
	NOD1&gt;;&lt;IP of NOD2&gt;</FONT></FONT></FONT></SPAN></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western">5.6.2Configuration of the
	SignServer</H3>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>This
	section shows an example configuration of a time-stamp server. But
	you'll probably have to change this to fit your into your
	application.</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>For
	this example you need a time-stamp authority p12 file, or you can
	use the test key store in src/test/timestamp1.p12</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>First
	edit the qs_timestamp_configuration.properties file and set the
	default policy id, the path to the timestamp p12 file and its
	password.</FONT></FONT></P>
	<OL>
		<P LANG="en-US" CLASS="western"></P>
	</OL>
	<P LANG="en-GB" CLASS="western">Use the signserver cli to upload the
	configuration file.<BR><SAMP><FONT SIZE=2>bin\signserver.sh
	setproperies qs_timestamp_configuration.properties</FONT></SAMP></P>
	<OL START=0>
		<P LANG="en-US" CLASS="western"></P>
	</OL>
	<P LANG="en-US" CLASS="western"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Then
	run <BR><SAMP><FONT SIZE=2>bin\signserver.sh getconfig 1<BR></FONT><SAMP><FONT SIZE=3><FONT FACE="Times New Roman, serif">Or
	you could use the signers name</FONT></FONT><FONT SIZE=2><BR>bin\signserver.sh
	getconfig timestampSigner</FONT></SAMP></SAMP><BR>And double-check
	the configuration. (Important, the properties are case
	sensitive).<BR><BR>Finally run<BR> <SAMP><FONT SIZE=2>bin\signserver.sh
	reload 1 <BR></FONT><SAMP><FONT SIZE=3><FONT FACE="Times New Roman, serif">To
	activate the configuration and you are all set.</FONT></FONT></SAMP></SAMP></FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<H2 LANG="en-GB" CLASS="western" STYLE="background: transparent; page-break-after: avoid">
	<FONT SIZE=4><I>5.7Test the installation</I></FONT></H2>
	<H3 LANG="en-GB" CLASS="western">5.7.1The automated test script</H3>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>This can only be run if
	 the Staging component  is the same server as a Service component.
	(since it calls the jboss instance on localhost)</FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>Make
	sure both the signserver directory are owned by jboss.</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>chown
	-R jboss.jboss /opt/signserver_&lt;version&gt; </FONT></FONT>
	</P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>su
	&ndash; jboss</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>cd
	/opt/signserver</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2>ant
	test:run</FONT></FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>A report is generated
	in /opt/signserver/tmp/bin/junit/reports/html/index.html</FONT></P>
	<P LANG="en-US" CLASS="western"><BR>
	</P>
	<H3 LANG="en-GB" CLASS="western">5.7.2The test client</H3>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-US" CLASS="western"><FONT FACE="Courier New, monospace"><FONT SIZE=2><FONT SIZE=3><FONT FACE="Times New Roman, serif">Run
	the test-client to see that everything is up.</FONT></FONT><BR><BR><SAMP><FONT SIZE=1 STYLE="font-size: 8pt">cd
	dist-client<BR>java -jar timeStampClient.jar
	&ldquo;</FONT><A HREF="http://localhost:8080/signserver/tsa?signerId=1"><FONT SIZE=1 STYLE="font-size: 8pt">http://localhost:8080/signserver/tsa?signerId=1</FONT></A><FONT SIZE=1 STYLE="font-size: 8pt">&rdquo;<BR><BR></FONT><FONT SIZE=3><FONT FACE="Times New Roman, serif">The
	message &ldquo;TimeStampRequest Validated&rdquo; should appear once
	a second.<BR>Also check JBOSS_HOME/server/default/log/server.log
	that successful messages appear.</FONT></FONT></SAMP></FONT></FONT></P>
	<H1 LANG="en-GB" CLASS="western" ALIGN=LEFT><FONT SIZE=4><B>6 More
	Information </B></FONT>
	</H1>
	<P LANG="en-GB" CLASS="western"><FONT SIZE=3>More information about
	the signserver can be found at:</FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><SPAN LANG="en-GB"><FONT SIZE=3><FONT COLOR="#000000">SignServer.org,
	</FONT></FONT></SPAN><FONT COLOR="#0000ff"><U><A HREF="http://www.ejbca.org/"><SPAN LANG="en-GB"><FONT SIZE=3>http://www.signserver.org</FONT></SPAN></A></U></FONT></P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
	<P LANG="en-GB" CLASS="western"><BR>
	</P>
</DIV>
</BODY>
</HTML>