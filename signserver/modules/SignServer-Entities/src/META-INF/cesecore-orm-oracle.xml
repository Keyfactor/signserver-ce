<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_1_0.xsd"
  version="1.0">

    <!-- 
         This file contains mappings specific to Oracle 9.x or 10.x and the JDBC driver version 10.1.0.2.

         boolean: NUMBER(1)
         int:     NUMBER(10)
         long:    NUMBER(19)
         String:  VARCHAR2(255 byte)
         CLOB:    CLOB
         Object:  BLOB

         Exceptions:
         - 
         
         Notes:
         - 
    -->

    <entity class="org.cesecore.authorization.rules.AccessRuleData" access="PROPERTY" metadata-complete="false">
    	<table name="AccessRulesData"/>
        <attributes>
            <id name="primaryKey"><column name="pK" column-definition="NUMBER(10)"/></id>
            <basic fetch="EAGER" name="accessRuleName"><column name="accessRule" column-definition="VARCHAR2(255 byte)" nullable="false"/></basic>
            <basic fetch="EAGER" name="state"><column name="rule" column-definition="NUMBER(10)" nullable="false"/></basic>
            <basic fetch="EAGER" name="recursiveBool"><column name="isRecursive" column-definition="NUMBER(1)" nullable="false"/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="CLOB"/><lob/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="NUMBER(10)" nullable="false"/></version>
            <transient name="recursiveInt"/>
        </attributes>
    </entity>

    <entity class="org.cesecore.authorization.cache.AccessTreeUpdateData" access="PROPERTY" metadata-complete="false">
    	<table name="AuthorizationTreeUpdateData"/>
        <attributes>
            <id name="primaryKey"><column name="pK" column-definition="NUMBER(10)"/></id>
            <basic fetch="EAGER" name="accessTreeUpdateNumber"><column name="authorizationTreeUpdateNumber" column-definition="NUMBER(10)" nullable="false"/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="CLOB"/><lob/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="NUMBER(10)" nullable="false"/></version>
        </attributes>
    </entity>

    <entity class="org.cesecore.authorization.user.AccessUserAspectData" access="PROPERTY" metadata-complete="false">
    	<table name="AdminEntityData"/>    
        <attributes>
            <id name="primaryKey"><column name="pK" column-definition="NUMBER(10)"/></id>
            <basic fetch="EAGER" name="matchWith"><column name="matchWith" column-definition="NUMBER(10)" nullable="false"/></basic>
            <basic fetch="EAGER" name="matchType"><column name="matchType" column-definition="NUMBER(10)" nullable="false"/></basic>
            <basic fetch="EAGER" name="matchValue"><column name="matchValue" column-definition="VARCHAR2(255 byte)"/></basic>
            <basic fetch="EAGER" name="caId"><column name="cAId" column-definition="NUMBER(10)" nullable="false"/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="CLOB"/><lob/></basic>
            <basic fetch="EAGER" name="tokenType"><column name="tokenType" column-definition="VARCHAR2(255 byte)"/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="NUMBER(10)" nullable="false"/></version>
        </attributes>
    </entity>

    <entity class="org.cesecore.audit.impl.integrityprotected.AuditRecordData" access="PROPERTY" metadata-complete="false">
        <attributes>
            <id name="pk"><column name="pk" column-definition="VARCHAR2(255 byte)"/></id>
            <basic fetch="EAGER" name="nodeId"><column name="nodeId" column-definition="VARCHAR2(255 byte)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="sequenceNumber"><column name="sequenceNumber" column-definition="NUMBER(19)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="timeStamp"><column name="timeStamp" column-definition="NUMBER(19)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="eventType"><column name="eventType" column-definition="VARCHAR2(255 byte)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="eventStatus"><column name="eventStatus" column-definition="VARCHAR2(255 byte)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="authToken"><column name="authToken" column-definition="VARCHAR2(255 byte)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="service"><column name="service" column-definition="VARCHAR2(255 byte)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="module"><column name="module" column-definition="VARCHAR2(255 byte)" nullable="false" updatable="false"/></basic>
            <basic fetch="EAGER" name="customId"><column name="customId" column-definition="VARCHAR2(255 byte)" nullable="true" updatable="false"/></basic>
            <basic fetch="EAGER" name="searchDetail1"><column name="searchDetail1" column-definition="VARCHAR2(255 byte)" nullable="true" updatable="false"/></basic>
            <basic fetch="EAGER" name="searchDetail2"><column name="searchDetail2" column-definition="VARCHAR2(255 byte)" nullable="true" updatable="false"/></basic>
            <basic fetch="EAGER" name="additionalDetails"><column name="additionalDetails" column-definition="CLOB" nullable="true" updatable="false"/><lob/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="CLOB"/><lob/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="NUMBER(10)" nullable="false"/></version>
        </attributes>
    </entity>
    
    <!-- SignServer: org.cesecore.certificates.ca.CAData removed -->

    <entity class="org.cesecore.roles.RoleData" access="PROPERTY" metadata-complete="false">
    	<table name="AdminGroupData"/>
        <attributes>
            <id name="primaryKey"><column name="pK" column-definition="NUMBER(10)"/></id>
            <basic fetch="EAGER" name="roleName"><column name="adminGroupName" column-definition="VARCHAR2(255 byte)" nullable="false"/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="CLOB"/><lob/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="NUMBER(10)" nullable="false"/></version>
            <one-to-many name="accessRules" fetch="EAGER"><map-key name="primaryKey"/><join-column name="AdminGroupData_accessRules" column-definition="NUMBER(10)"/><cascade><cascade-all/></cascade></one-to-many>
            <one-to-many name="accessUsers" fetch="EAGER"><map-key name="primaryKey"/><join-column name="AdminGroupData_adminEntities" column-definition="NUMBER(10)"/><cascade><cascade-all/></cascade></one-to-many>
        </attributes>
    </entity>

</entity-mappings>

